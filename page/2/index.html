<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"gen2710.netlify.app","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.22.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":true,"style":null},"fold":{"enable":true,"height":100},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Gains Do not Stop!">
<meta property="og:type" content="website">
<meta property="og:title" content="U.N.O">
<meta property="og:url" content="http://gen2710.netlify.app/page/2/index.html">
<meta property="og:site_name" content="U.N.O">
<meta property="og:description" content="Gains Do not Stop!">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Hita">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://gen2710.netlify.app/page/2/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>U.N.O</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">U.N.O</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hita"
      src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
  <p class="site-author-name" itemprop="name">Hita</p>
  <div class="site-description" itemprop="description">Gains Do not Stop!</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">32</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/jiangbaoaaa" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jiangbaoaaa" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:n13155609602@163.com" title="E-mail → mailto:n13155609602@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/05/20/8.1%20%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%B9%B3%E5%8F%B0%E8%AE%BE%E8%AE%A1-%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/05/20/8.1%20%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%B9%B3%E5%8F%B0%E8%AE%BE%E8%AE%A1-%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">8.1 机器人平台设计-控制系统</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-05-20 00:00:00 / 修改时间：20:41:24" itemprop="dateCreated datePublished" datetime="2025-05-20T00:00:00+08:00">2025-05-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="8-1-机器人平台设计-控制系统"><a href="#8-1-机器人平台设计-控制系统" class="headerlink" title="8.1 机器人平台设计-控制系统"></a>8.1 机器人平台设计-控制系统</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mindmap</span><br><span class="line">  root</span><br><span class="line">    机器人系统</span><br><span class="line">      传感系统</span><br><span class="line">        视觉传感器</span><br><span class="line">        距离传感器</span><br><span class="line">        触觉传感器</span><br><span class="line">        温度传感器</span><br><span class="line">        惯性传感器</span><br><span class="line">      控制系统</span><br><span class="line">        CPU</span><br><span class="line">        控制算法</span><br><span class="line">        操作系统</span><br><span class="line">      驱动系统</span><br><span class="line">        电动机</span><br><span class="line">        电源管理</span><br><span class="line">      执行机构</span><br><span class="line">        轮子</span><br><span class="line">        机械臂</span><br><span class="line">        抓取器</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="工控机简介"><a href="#工控机简介" class="headerlink" title="工控机简介"></a>工控机简介</h2><p>本次机器人小车使用的是<strong>nuvo-7100VTC</strong>工控机作为控制系统，下面做一个简单介绍。</p>
<p>可以类比为一个小型电脑主机，作为后面控制机器人底盘运动的主机。</p>
<p><img src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/image-%E8%A7%84%E6%A0%BC1.png" alt="image-20250416202441725"></p>
<p><img src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/image-%E8%A7%84%E6%A0%BC2.png" alt="image-20250416202514369"></p>
<p>把工控机装上电源之后可以在上面安装ros ,此台工控机的ubuntu版本是<strong>18.04</strong> 、ROS版本是<strong>melodic</strong></p>
<hr>
<h2 id="分布式框架"><a href="#分布式框架" class="headerlink" title="分布式框架"></a>分布式框架</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>先连接上一个网络，再为工控机分配一个静态IP</p>
<p><img src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/wifi%E8%AE%BE%E7%BD%AE3.png"></p>
<p><img src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/wifi%E8%AE%BE%E7%BD%AE4.png"></p>
<p>这样在两台计算机中配置好相同的IP,就可以配置分布式框架了</p>
<hr>
<p>首先找到两台计算机的IP地址以及计算机名称</p>
<p>通过指令：</p>
<blockquote>
<p>IP地址查看名: ifconfig</p>
<p>计算机名称查看: hostname</p>
</blockquote>
<p>获得我的两台计算机的分别为</p>
<table>
<thead>
<tr>
<th></th>
<th>IP</th>
<th>计算机名</th>
</tr>
</thead>
<tbody><tr>
<td>主机</td>
<td>192.168.3.127</td>
<td>robot-Nuvo-7100VTC-Series</td>
</tr>
<tr>
<td>从机（自己的电脑）</td>
<td>192.168.3.35</td>
<td>chenguoqing-G3-3590</td>
</tr>
</tbody></table>
<p>这样准备工作完成</p>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><h4 id="修改计算机的-etc-hosts-文件"><a href="#修改计算机的-etc-hosts-文件" class="headerlink" title="修改计算机的&#x2F;etc&#x2F;hosts 文件"></a>修改计算机的&#x2F;etc&#x2F;hosts 文件</h4><p><strong>从机</strong>：</p>
<p>输入：<code>sudo gedit /etc/hosts</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1       localhost</span><br><span class="line">127.0.1.1       robot-Nuvo-7100VTC-Series</span><br><span class="line">192.168.3.127   robot-Nuvo-7100VTC-Series</span><br><span class="line">192.168.3.25    chenguoqing-G3-3590</span><br></pre></td></tr></table></figure>

<p><strong>主机</strong></p>
<p>类似修改，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1       localhost</span><br><span class="line">127.0.1.1       chenguoqing-G3-3590</span><br><span class="line">192.168.3.127   robot-Nuvo-7100VTC-Series</span><br><span class="line">192.168.3.25    chenguoqing-G3-3590</span><br></pre></td></tr></table></figure>

<h4 id="配置IP地址"><a href="#配置IP地址" class="headerlink" title="配置IP地址"></a>配置IP地址</h4><p><strong>从机</strong></p>
<p>输入：<code>gedit .bashrc</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export ROS_MASTER_URI=http://192.168.3.127:11311  # 指向机器1的ROS Master</span><br><span class="line">export ROS_HOSTNAME=192.168.3.35</span><br><span class="line">export ROS_IP=192.168.3.35</span><br></pre></td></tr></table></figure>

<p><strong>主机</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export ROS_MASTER_URI=http://192.168.3.127:11311  # 指向机器1的ROS Master</span><br><span class="line">export ROS_HOSTNAME=192.168.3.127</span><br><span class="line">export ROS_IP=192.168.3.35</span><br></pre></td></tr></table></figure>



<p>至于为什么要添加ROS_IP呢？</p>
<p>是有可能会出现主机能够发布消息但是却不能接收消息的情况，所以加上一行这个就可以让主机找到从机IP！</p>
<hr>
<p>测试之前记得输入<code>source ~/.bashrc</code></p>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>1.主机启动 roscore(必须)</p>
<p>2.主机启动订阅节点，从机启动发布节点，测试通信是否正常</p>
<p>3.反向测试，主机启动发布节点，从机启动订阅节点，测试通信是否正常</p>
<p>不要在从机启动roscore，否则系统会警告，这样的话会默认把Master的IP地址修改为从机的IP地址。</p>
<h3 id="取消多机通讯"><a href="#取消多机通讯" class="headerlink" title="取消多机通讯"></a>取消多机通讯</h3><p>注释之前在hosts文件以及bashrc文件中添加的内容即可！</p>
<hr>
<h3 id="ssh使用"><a href="#ssh使用" class="headerlink" title="ssh使用"></a>ssh使用</h3><p><strong>简介</strong></p>
<p>SSH（Secure Shell）是一种用于计算机网络中进行安全通信的协议，它主要用于远程登录和远程执行命令。通过SSH，用户可以安全地连接到远程计算机（如服务器），执行命令和管理系统，而不必担心数据被窃听或篡改。</p>
<p><strong>实现</strong></p>
<p>自己的个人pc属于客户端，工控机属于服务端，整个实现具体流程是:</p>
<ol>
<li>分别安装SSH客户端与服务端</li>
<li>服务端启动SSH服务</li>
<li>客户端远程登陆服务端</li>
<li>实现数据传输</li>
</ol>
<hr>
<h4 id="安装SSH客户端以及服务端"><a href="#安装SSH客户端以及服务端" class="headerlink" title="安装SSH客户端以及服务端"></a>安装SSH客户端以及服务端</h4><p>需要在自己的PC下载客户端</p>
<p><code>  sudo apt-get install openssh-client</code></p>
<p>在工控机下载服务端</p>
<p><code>sudo apt-get install openssh-server</code></p>
<h4 id="服务端启动SSH服务"><a href="#服务端启动SSH服务" class="headerlink" title="服务端启动SSH服务"></a>服务端启动SSH服务</h4><p>在工控机启动服务</p>
<p><code>sudo /etc/init.d/ssh start</code></p>
<p>查看服务启动是否正常</p>
<p><code> sudo systemctl status ssh</code></p>
<p>可以查看日志等信息</p>
<p>可以将ssh服务设置成开机自启动</p>
<p><code>sudo systemctl enable ssh</code></p>
<h4 id="客户端登陆服务器"><a href="#客户端登陆服务器" class="headerlink" title="客户端登陆服务器"></a>客户端登陆服务器</h4><p>登陆服务器命令</p>
<p><code>ssh 账号@ip地址</code></p>
<p>账号就是在工控机终端打开的时候出现在@前面的名字</p>
<p>这个是</p>
<p><code>ssh robot@192.168.3.127</code></p>
<p>可以根据提示，输入登录密码（登陆工控机的密码）</p>
<p>如果出现 access denyed</p>
<p>说明出现问题，可能是密码输入错误、用户名写错了、或者是config文件配置出错。</p>
<p>如果是第三种，需要使用命令</p>
<p><code>gedit  /etc/ssh/sshd_config</code></p>
<p>在工控机中打开这个配置文件，进行修改。</p>
<p>如果退出登陆，可以调用exit命令:</p>
<p><code>exit</code></p>
<h4 id="实现数据传输"><a href="#实现数据传输" class="headerlink" title="实现数据传输"></a>实现数据传输</h4><p>上传文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp 本地文件路径 账号@ip:工控机路径</span><br></pre></td></tr></table></figure>

<p>上传文件夹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r 本地文件夹路径 账号@ip:工控机路径路径</span><br></pre></td></tr></table></figure>

<p>下载文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp 账号@ip:工控机路径 本地文件夹路径</span><br></pre></td></tr></table></figure>

<p>下载文件夹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r 账号@ip:工控机路径 本地文件夹路径</span><br></pre></td></tr></table></figure>

<h4 id="使用优化"><a href="#使用优化" class="headerlink" title="使用优化"></a>使用优化</h4><p>可以借助密钥简化登陆过程。</p>
<p>实现思想是:生成一对公钥私钥，私钥存储在本地，公钥上传至服务器，每次登陆时，本地直接上传私钥到服务器，服务器有匹配的公钥就认为是合法用户，直接创建SSH连接即可。具体实现步骤只有两步:</p>
<ol>
<li>本地生成密钥对</li>
<li>将公钥上传至工控机</li>
</ol>
<h5 id="1-生成密钥对"><a href="#1-生成密钥对" class="headerlink" title="1.生成密钥对"></a>1.生成密钥对</h5><p>本地客户端生成公私钥：（一路回车默认即可）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure>

<p>上面这个命令会在用户目录.ssh文件夹下创建公私钥:</p>
<ol>
<li>id_rsa （私钥）</li>
<li>id_rsa.pub (公钥)</li>
</ol>
<h5 id="2-将公钥上"><a href="#2-将公钥上" class="headerlink" title="2.将公钥上"></a>2.将公钥上</h5><p>上传</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub 账号@ip</span><br></pre></td></tr></table></figure>

<p>上面这条命令是写到服务器上的ssh目录下，该目录下有文件authorized_keys保存了公钥内容。</p>
<p>以后再登陆树莓派就无需录入密码了。</p>
<p>以后登陆只需要输入：</p>
<p><code>ssh &#39;robot@192.168.3.127&#39;</code>即可登陆</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/05/20/%E6%9D%BE%E7%81%B5%E6%9C%BA%E5%99%A8%E4%BA%BAScout-mini%E4%BD%BF%E7%94%A8Ros%E4%BE%8B%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/05/20/%E6%9D%BE%E7%81%B5%E6%9C%BA%E5%99%A8%E4%BA%BAScout-mini%E4%BD%BF%E7%94%A8Ros%E4%BE%8B%E7%A8%8B/" class="post-title-link" itemprop="url">松灵机器人Scout-mini使用Ros例程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-05-20 00:00:00 / 修改时间：20:43:58" itemprop="dateCreated datePublished" datetime="2025-05-20T00:00:00+08:00">2025-05-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%9D%BE%E7%81%B5%E6%9C%BA%E5%99%A8%E4%BA%BA/" itemprop="url" rel="index"><span itemprop="name">松灵机器人</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="松灵机器人Scout-mini使用Ros例程"><a href="#松灵机器人Scout-mini使用Ros例程" class="headerlink" title="松灵机器人Scout-mini使用Ros例程"></a>松灵机器人Scout-mini使用Ros例程</h1><p>工控机配置：</p>
<p>Ubuntu :18.04</p>
<p>Ros:Melodic</p>
<h2 id="硬件连接"><a href="#硬件连接" class="headerlink" title="硬件连接"></a>硬件连接</h2><p>小车上弄好了，把usb插头插上就能用了</p>
<p>附上官方使用文档</p>
<p>参考这个链接：</p>
<p><a target="_blank" rel="noopener" href="https://new.agilex.ai/raw/upload/20230718/SCOUT%20MINI%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C20230718_74957.pdf">https://new.agilex.ai/raw/upload/20230718/SCOUT%20MINI%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C20230718_74957.pdf</a></p>
<p>把小车电源打开，使用gs_usb kernel模块，系统开机运行过一次即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe gs_usb</span><br></pre></td></tr></table></figure>

<p>然后，我们使用命令使能can_to_sub，并设置通信的波特率为500K。每次重新将CAN_TO_USB连接到电脑端口都需要运行一次下面的命令，如果显示Connection time out就插拔一下USB。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装依赖包</span></span><br><span class="line"><span class="built_in">sudo</span> apt install can-utils</span><br><span class="line"><span class="comment"># 连接</span></span><br><span class="line"><span class="built_in">sudo</span> ip <span class="built_in">link</span> <span class="built_in">set</span> can0 up <span class="built_in">type</span> can bitrate 500000</span><br></pre></td></tr></table></figure>

<p>之后，查看一下can总线是否连接到电脑。如下图可见，我的电脑成功识别到了一个 叫can0的设备。如果上一步出错，也可以运行这个指令看看是否连接成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig -a</span><br></pre></td></tr></table></figure>

<p>![2025-05-20 18-19-43 的屏幕截图](&#x2F;home&#x2F;jiangbao&#x2F;图片&#x2F;2025-05-20 18-19-43 的屏幕截图.png)</p>
<p>接着可以监听来自scout mini的数据</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 监听scout mini的运动数据</span></span><br><span class="line">candump can0</span><br></pre></td></tr></table></figure>

<p>这一步输入后，命令行将持续输出一堆<strong>字符串</strong>，我们可以通过遥控器控制小车底盘的运动，这样传回的数据将会相应的变化。我们把<strong>拨杆SWB掰到中间位置(他有三个位置)，就可以控制scout_mini的运动了。SWB默认位置，我们可以通过Ros程序控制底盘运动</strong>；SWB中间位置，可以通过遥控器控制底盘运动；SWB第三个位置，两种控制模式都失效。具体的在刚才那个手册里面有详细介绍。所以现在应该把拨片放在最上面。</p>
<h2 id="ROS功能包下载"><a href="#ROS功能包下载" class="headerlink" title="ROS功能包下载"></a>ROS功能包下载</h2><p>首先，需要安装一些依赖，需要根据自己的Ros版本更改对应的命令，我的为<strong>melodic</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 需要根据自己的ros版本更改</span></span><br><span class="line"><span class="built_in">sudo</span> apt install ros-melodic-controller-manager</span><br><span class="line"><span class="built_in">sudo</span> apt install ros-melodic-joint-state-publisher-gui </span><br><span class="line"><span class="built_in">sudo</span> apt install -y libasio-dev</span><br></pre></td></tr></table></figure>

<p>然后，将代码包下载到创建的工作空间下的src目录，我这里放到了自行创建的功能包scout_ws下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p scout_ws/src</span><br><span class="line"><span class="built_in">cd</span> scout_ws/</span><br><span class="line">catkin_make</span><br></pre></td></tr></table></figure>

<p>这是ROS基础知识,不再赘述。</p>
<p>Ros功能包这里，我们只需下载两个功能包，其一为必须的 <strong>ugv_sdk</strong> ，其二为 scout_ros 。第二个功能包需要根据自己的小车型号而定。（官网文档默认下载scout_ros）。</p>
<p>官方链接在这：</p>
<p><a target="_blank" rel="noopener" href="https://github.com/agilexrobotics">https://github.com/agilexrobotics</a></p>
<p>可以自己寻找。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载代码</span></span><br><span class="line"><span class="built_in">cd</span> scout_ws/src/</span><br><span class="line"><span class="comment"># 这个都一样，底盘驱动的sdk</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/agilexrobotics/ugv_sdk.git  --recursive</span><br><span class="line"><span class="comment"># 下载自己需要的功能包（去github上面找）</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/agilexrobotics/scout_ros.git</span><br></pre></td></tr></table></figure>

<p>编译一下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/scout_ws/</span><br><span class="line">catkin_make</span><br><span class="line"><span class="built_in">source</span> devel/setup.bash</span><br></pre></td></tr></table></figure>

<h2 id="键盘控制"><a href="#键盘控制" class="headerlink" title="键盘控制"></a>键盘控制</h2><p>这里简记一下使用官方提供的Ros例程，既使用键盘控制scout_mini运动的过程。我们<strong>要使用电脑控制scout_mini底盘的运动，需要将遥控器上的SWB切换为默认位置</strong>。<strong>当出现紧急情况，将SWB切换到其他位置，可以实现控制小车急停的效果</strong>。SWB默认位置，我们可以通过Ros程序控制底盘运动；SWB中间位置，可以通过遥控器控制底盘运动；SWB第三个位置，两种控制模式都失效。</p>
<p>需要下载 teleop_twist_keyboard 功能包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install ros-melodic-teleop-twist-keyboard</span><br></pre></td></tr></table></figure>

<p>连接电脑USB，开启scout_mini电源：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1）连接设备</span></span><br><span class="line"><span class="built_in">sudo</span> ip <span class="built_in">link</span> <span class="built_in">set</span> can0 up <span class="built_in">type</span> can bitrate 500000</span><br><span class="line"><span class="comment"># 2）测试：接收数据</span></span><br><span class="line">candump can0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3）运行小车底盘的ros节点 base</span></span><br><span class="line"><span class="built_in">cd</span> scout_ws/    <span class="comment"># 这里得是自己的工作空间目录</span></span><br><span class="line"><span class="built_in">source</span> ./devel/setup.bash</span><br><span class="line">roslaunch scout_bringup scout_robot_base.launch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4）运行键盘控制节点 Launch ROS nodes</span></span><br><span class="line"><span class="built_in">cd</span> scout_ws/    <span class="comment"># 这里得是自己的工作空间目录</span></span><br><span class="line"><span class="built_in">source</span> ./devel/setup.bash</span><br><span class="line">roslaunch scout_bringup scout_teleop_keyboard.launch</span><br></pre></td></tr></table></figure>

<p>在此之前，先熟悉一下键盘控制节点：</p>
<p>![](&#x2F;home&#x2F;jiangbao&#x2F;图片&#x2F;2025-05-20 18-35-11 的屏幕截图.png)</p>
<ul>
<li><p>ｉ／，：控制小车直行 or 后退</p>
</li>
<li><p>ｋ：停止运动（使用ctrl + z，效果相同）</p>
</li>
<li><p>ｊ／ｌ：控制小车逆时针 or 顺时针旋转</p>
</li>
<li><p>ｕ／ｏ：控制小车左转 or 右转</p>
</li>
<li><p>m／. ：控制小车左后 or 右后倒车</p>
</li>
<li><p>q &#x2F; z :控制小车增加&#x2F;减少速度的10%</p>
</li>
<li><p>w&#x2F;x:增加&#x2F;减少线速度的10%</p>
</li>
<li><p>e&#x2F;c: 增加&#x2F;减少角速度的10%</p>
</li>
</ul>
<p>![](&#x2F;home&#x2F;jiangbao&#x2F;图片&#x2F;2025-05-20 18-38-41 的屏幕截图.png)</p>
<p>所以应该事先减速，要不然这个车快的起飞。</p>
<p>之后，就可以直接把鼠标放在键盘上操纵小车了，如果失控，记得及时使用<strong>遥控器将SWB拨至最小面</strong>。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/2025.04.01%20%E7%BB%84%E4%BC%9A%E2%80%94%E2%80%94%E5%89%8D%E4%BA%94%E7%AB%A0%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/2025.04.01%20%E7%BB%84%E4%BC%9A%E2%80%94%E2%80%94%E5%89%8D%E4%BA%94%E7%AB%A0%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">2025.04.01 组会——前五章总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:54:38" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BB%84%E4%BC%9A/" itemprop="url" rel="index"><span itemprop="name">组会</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="2025-04-01-组会——前五章总结"><a href="#2025-04-01-组会——前五章总结" class="headerlink" title="2025.04.01 组会——前五章总结"></a>2025.04.01 组会——前五章总结</h1><h2 id="一、通信机制"><a href="#一、通信机制" class="headerlink" title="一、通信机制"></a>一、通信机制</h2><h3 id="话题通信："><a href="#话题通信：" class="headerlink" title="话题通信："></a>话题通信：</h3><p>话题通信是ROS中使用频率最高的一种通信模式，话题通信是基于<strong>发布订阅</strong>模式的，也即:一个节点发布消息，另一个节点订阅该消息。话题通信适用于不断更新的数据传输相关的应用场景。</p>
<h4 id="1-通信流程"><a href="#1-通信流程" class="headerlink" title="1. 通信流程"></a>1. 通信流程</h4><p><strong>流程</strong></p>
<ol>
<li>编写发布方实现；</li>
<li>编写订阅方实现；</li>
<li>编辑配置文件；</li>
<li>编译并执行。</li>
</ol>
<p>可以解耦和，即在不同平台通讯，只要话题一致，即可通讯。</p>
<h4 id="2-话题通信自定义msg"><a href="#2-话题通信自定义msg" class="headerlink" title="2.话题通信自定义msg"></a>2.话题通信自定义msg</h4><p><strong>流程:</strong></p>
<ol>
<li>按照固定格式创建 msg 文件</li>
<li>编辑配置文件</li>
<li>编译生成可以被 Python 或 C++ 调用的中间文件</li>
</ol>
<p><strong>类似于在ROS中新建了一个类，可以简化节点的数据交换</strong></p>
<h4 id="3-话题通信自定义msg调用"><a href="#3-话题通信自定义msg调用" class="headerlink" title="3.话题通信自定义msg调用"></a>3.话题通信自定义msg调用</h4><hr>
<h3 id="服务通信"><a href="#服务通信" class="headerlink" title="服务通信"></a>服务通信</h3><p>服务通信也是ROS中一种极其常用的通信模式，服务通信是基于请求响应模式的，是一种应答机制。也即: 一个节点A向另一个节点B发送请求，B接收处理请求并产生响应结果返回给A。</p>
<h4 id="1-通信流程-1"><a href="#1-通信流程-1" class="headerlink" title="1.通信流程"></a>1.通信流程</h4><p><strong>流程</strong></p>
<ol>
<li>Server注册</li>
<li>Client注册</li>
<li>ROS Master实现信息匹配</li>
<li>Client发送请求</li>
<li>Server发送响应</li>
</ol>
<hr>
<h4 id="2-服务通信自定义srv"><a href="#2-服务通信自定义srv" class="headerlink" title="2.服务通信自定义srv"></a>2.服务通信自定义srv</h4><p>与msg文件一致，srv文件也需要自定义。与msg文件实现流程类似。</p>
<ol>
<li>按照固定格式创建srv文件</li>
<li>编辑配置文件</li>
<li>编译生成中间文件</li>
</ol>
<h4 id="3-服务通信自定义srv调用"><a href="#3-服务通信自定义srv调用" class="headerlink" title="3.服务通信自定义srv调用"></a>3.服务通信自定义srv调用</h4><p><strong>流程</strong>：</p>
<ol>
<li>编写服务端实现；</li>
<li>编写客户端实现；</li>
<li>编辑配置文件；</li>
<li>编译并执行。</li>
</ol>
<hr>
<h3 id="参数服务器"><a href="#参数服务器" class="headerlink" title="参数服务器"></a>参数服务器</h3><p>参数服务器在ROS中主要用于实现不同节点之间的<strong>数据共享</strong>。参数服务器相当于是独立于所有节点的一个<strong>公共容器</strong>，可以将数据<strong>存储</strong>在该容器中，被不同的节点调用，当然不同的节点也可以往其中存储数据。</p>
<h4 id="1-通信流程-2"><a href="#1-通信流程-2" class="headerlink" title="1.通信流程"></a>1.通信流程</h4><p><strong>流程：</strong></p>
<ol>
<li>Talker设置参数</li>
<li>Listener参数获取</li>
<li>ROS Master 向Listener发送参数值</li>
</ol>
<h4 id="2-参数操作"><a href="#2-参数操作" class="headerlink" title="2.参数操作"></a>2.参数操作</h4><p>增删改查</p>
<hr>
<h2 id="二、通信机制进阶"><a href="#二、通信机制进阶" class="headerlink" title="二、通信机制进阶"></a>二、通信机制进阶</h2><p>详细介绍各种常用的API</p>
<p>如初始化、回旋函数（用于处理回调函数）、时间、、、、、、</p>
<hr>
<h2 id="三、ROS运行管理"><a href="#三、ROS运行管理" class="headerlink" title="三、ROS运行管理"></a>三、ROS运行管理</h2><h3 id="元功能包"><a href="#元功能包" class="headerlink" title="元功能包"></a>元功能包</h3><p>在ROS中，提供了一种方式可以将不同的功能包打包成一个功能包，当安装某个功能模块时，直接调用打包后的功能包即可，该包又称之为<strong>元功能包(metapackage)</strong>。</p>
<h3 id="launch文件管理ROS节点运行"><a href="#launch文件管理ROS节点运行" class="headerlink" title="launch文件管理ROS节点运行"></a>launch文件管理ROS节点运行</h3><p>launch 文件是一个 XML 格式的文件，可以启动本地和远程的多个节点，还可以在参数服务器中设置参数。</p>
<p><strong>流程：</strong></p>
<ol>
<li>新建launch文件</li>
<li>调用launch文件</li>
</ol>
<hr>
<p>launch文件中有很多实用的文件标签</p>
<p>例如launch文件中的remap，可以不直接修改节点代码的情况下，修改节点话题名称。</p>
<p>arg可以实现动态传参，增强launch文件的灵活性。</p>
<hr>
<h3 id="工作空间覆盖"><a href="#工作空间覆盖" class="headerlink" title="工作空间覆盖"></a>工作空间覆盖</h3><p>当不同工作空间中存在重名的功能包的情况时，就会出现工作空间覆盖。</p>
<p><img src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.jpg"></p>
<p>系统会默认在配置的环境中查找最先配置的功能包。</p>
<hr>
<h3 id="名称重名"><a href="#名称重名" class="headerlink" title="名称重名"></a>名称重名</h3><h4 id="1-节点名称重名"><a href="#1-节点名称重名" class="headerlink" title="1.节点名称重名"></a>1.节点名称重名</h4><p><strong>策略：</strong></p>
<ol>
<li>命名空间（添加前缀）</li>
<li>名称重映射（起别名）</li>
</ol>
<p><strong>途径：</strong></p>
<ol>
<li>rosrun命令行</li>
<li>launch文件</li>
<li>编码实现</li>
</ol>
<hr>
<h4 id="2-话题名称重名"><a href="#2-话题名称重名" class="headerlink" title="2.话题名称重名"></a>2.话题名称重名</h4><p>与节点名称重名解决策略类似，但是根据前缀不同，可以分为三种</p>
<ul>
<li>全局(参数名称直接参考ROS系统，与节点命名空间平级)</li>
<li>相对(参数名称参考的是节点的命名空间，与节点名称平级)</li>
<li>私有(参数名称参考节点名称，是节点名称的子级)</li>
</ul>
<hr>
<h4 id="3-参数名称重名"><a href="#3-参数名称重名" class="headerlink" title="3.参数名称重名"></a>3.参数名称重名</h4><p>关于参数重名的处理，没有重映射实现，为了尽量的避免参数重名，都是使用<strong>为参数名添加前缀</strong>的方式，实现类似于话题名称，有全局、相对、和私有三种类型之分。</p>
<ul>
<li>全局(参数名称直接参考ROS系统，与节点命名空间平级)</li>
<li>相对(参数名称参考的是节点的命名空间，与节点名称平级)</li>
<li>私有(参数名称参考节点名称，是节点名称的子级)</li>
</ul>
<p>同样有三种实现方式</p>
<hr>
<h3 id="ROS分布式通信"><a href="#ROS分布式通信" class="headerlink" title="ROS分布式通信"></a>ROS分布式通信</h3><p>ROS是一个分布式计算环境。一个运行中的ROS系统可以包含分布在多台计算机上多个节点。根据系统的配置方式，任何节点可能随时需要与任何其他节点进行通信。暂时用不到。</p>
<hr>
<h2 id="四、ROS常用组件"><a href="#四、ROS常用组件" class="headerlink" title="四、ROS常用组件"></a>四、ROS常用组件</h2><h3 id="TF坐标变换"><a href="#TF坐标变换" class="headerlink" title="TF坐标变换"></a>TF坐标变换</h3><p><strong>TF</strong>（Transform）是一个用于描述不同坐标系之间关系的框架，能够在机器人系统中管理和计算坐标系的变换。通过TF，可以动态地获取不同坐标系之间的变换信息。TF的核心概念是将不同坐标系（比如机器人底盘坐标系、传感器坐标系等）之间的空间关系表示出来，以便在机器人各个模块间进行精确的数据传递和转换。</p>
<h4 id="1-静态坐标变换"><a href="#1-静态坐标变换" class="headerlink" title="1.静态坐标变换"></a>1.静态坐标变换</h4><p><strong>实现分析</strong></p>
<ol>
<li>坐标系相对关系，可以通过发布方发布</li>
<li>订阅方订阅到发布的坐标系相对关系，再传入坐标点信息，可以实现坐标的变换，得到坐标点相对于世界坐标系的坐标。</li>
</ol>
<p><strong>实现流程</strong></p>
<ol>
<li>编写发布方实现，发布两个坐标系的相对关系</li>
<li>编写订阅方实现，订阅坐标信息，生成一个相对于子集坐标系的坐标点数据，转换成父级坐标系中的坐标点</li>
</ol>
<hr>
<h4 id="2-动态坐标变换"><a href="#2-动态坐标变换" class="headerlink" title="2.动态坐标变换"></a>2.动态坐标变换</h4><p>动态坐标变换，是指两个坐标系之间的相对位置是变化的。</p>
<p><strong>实现分析：</strong></p>
<ol>
<li>乌龟本身不但可以看成坐标系，还可以看成世界坐标系的一个坐标点</li>
<li>订阅乌龟位姿，可以获取乌龟相对世界坐标系的xyz坐标、偏移量、线速度、角速度</li>
<li><strong>将位姿信息转换成坐标系相对信息并且发布</strong></li>
</ol>
<p><strong>实现流程：</strong></p>
<ol>
<li>发布方实现，获取位姿信息，转换成坐标系相对关系，创建订阅对象，使用回调函数处理订阅的数据，使用TF发布数据</li>
<li>订阅方实现，创建TF订阅节点，生成一个相对于子集坐标系的坐标点，利用上一节静态的实现，可以转换为相对于父级坐标系的坐标。</li>
</ol>
<hr>
<h4 id="3-多坐标变换"><a href="#3-多坐标变换" class="headerlink" title="3.多坐标变换"></a>3.多坐标变换</h4><p>已知两个子集坐标系相对于父级坐标系的相对位置关系，可以求得其中一个子集坐标系中的点在另一个子集坐标系中的坐标。</p>
<p><strong>实现分析：</strong></p>
<ol>
<li>首先，需要发布son1&#x2F;son2相当于world的坐标信息</li>
<li>然后，订阅坐标发布信息，获取订阅的信息，实现两坐标系之间的转换</li>
<li>最后，实现坐标点的转换</li>
</ol>
<p><strong>实现流程：</strong></p>
<ol>
<li>发布方使用静态坐标发布节点，发布两个静态子级坐标系相对于父级坐标系的相对关系（使用launch文件快速发布）</li>
<li>订阅方实现，创建一个TF订阅对象，解析son1相对于son2的相对关系，发布son1中的某个点，计算son1中的点在son2中的坐标。</li>
</ol>
<hr>
<h4 id="4-实现乌龟跟随实操"><a href="#4-实现乌龟跟随实操" class="headerlink" title="4. 实现乌龟跟随实操"></a>4. 实现乌龟跟随实操</h4><p><img src="http://www.autolabor.com.cn/book/ROSTutorials/assets/TF%E5%9D%90%E6%A0%87%E5%8F%98%E6%8D%A2.gif" alt="img"></p>
<p><strong>实现分析：</strong></p>
<p>两个乌龟都要发布相对于世界坐标系的坐标信息，订阅到该信息转换成A相对于B的信息，最后生成速度信息，控制B运动。</p>
<ol>
<li>启动乌龟显示节点</li>
<li>生成两只乌龟（之前服务通信时候的示例）</li>
<li>编写发布方，实现两个乌龟节点位姿信息的订阅，再转换成坐标信息，需要启动两次节点，可以使用传参的形式。相当于启动两次动态坐标变换节点。</li>
<li>编写订阅方，实现订阅两只乌龟的TF广播信息，找到最近的信息，获取A相对于B的坐标信息，根据坐标信息生成速度信息，再发布速度信息。</li>
<li>运行，使用launch文件启动多个需要运行的节点。</li>
</ol>
<h3 id="rosbag"><a href="#rosbag" class="headerlink" title="rosbag"></a>rosbag</h3><p>提供数据的留存和读取。rosbag本质也是ros的节点，当录制时，rosbag是一个订阅节点，可以订阅话题消息并将订阅到的数据写入磁盘文件；当重放时，rosbag是一个发布节点，可以读取磁盘文件，发布文件中的话题消息。</p>
<hr>
<h3 id="rqt工具箱"><a href="#rqt工具箱" class="headerlink" title="rqt工具箱"></a>rqt工具箱</h3><p>可视化工具，可以将之前的工作进行可视化操作。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/4.1%20ROS%E5%85%83%E5%8A%9F%E8%83%BD%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/4.1%20ROS%E5%85%83%E5%8A%9F%E8%83%BD%E5%8C%85/" class="post-title-link" itemprop="url">4.1 ROS元功能包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:46:56" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="4-1-ROS元功能包"><a href="#4-1-ROS元功能包" class="headerlink" title="4.1 ROS元功能包"></a>4.1 ROS元功能包</h1><p> 逐一安装功能包的效率低下，在ROS中，提供了一种方式可以将不同的功能包打包成一个功能包，当安装某个功能模块时，直接调用打包后的功能包即可，该包又称之为<strong>元功能包(metapackage)</strong>。</p>
<hr>
<h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>MetaPackage是Linux的一个文件管理系统的概念。是ROS中的一个虚包，里面没有实质性的内容，但是它依赖了其他的软件包，通过这种方法可以把其他包组合起来，我们可以认为它是一本书的<strong>目录索引</strong>，告诉我们这个包集合中有哪些子包，并且该去哪里下载。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>方便用户的安装，我们只需要这一个包就可以把其他相关的软件包组织到一起安装了。</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p>**首先:**新建一个功能包plumbing_my 可以不用加依赖</p>
<p><strong>然后:<strong>修改</strong>package.xml</strong> ,内容如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>plumbing_pub_sub<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>plumbing_server_client<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>plumbing_param_server<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- The export tag contains other, unspecified, tags --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">metapackage</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>**最后:**修改 CMakeLists.txt,内容如下:</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.0</span>.<span class="number">2</span>)</span><br><span class="line"><span class="keyword">project</span>(demo)</span><br><span class="line"><span class="keyword">find_package</span>(catkin REQUIRED)</span><br><span class="line">catkin_metapackage()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>只保留以上这些内容。</p>
<p>如果出现报错，可以尝试：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf build devel</span><br><span class="line">catkin_make_isolated</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/3.2%20ROS%E4%B8%AD%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%8E%E6%BA%90%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/3.2%20ROS%E4%B8%AD%E7%9A%84%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%8E%E6%BA%90%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">3.2 ROS中的头文件与源文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:46:11" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-2-ROS中的头文件与源文件"><a href="#3-2-ROS中的头文件与源文件" class="headerlink" title="3.2 ROS中的头文件与源文件"></a>3.2 ROS中的头文件与源文件</h1><ol>
<li>设置头文件，可执行文件作为源文件；</li>
<li>分别设置头文件，源文件与可执行文件。</li>
</ol>
<p>在ROS中关于头文件的使用，核心内容在于CMakeLists.txt文件的配置，不同的封装方式，配置上也有差异。</p>
<h2 id="3-2-1-自定义头文件调用"><a href="#3-2-1-自定义头文件调用" class="headerlink" title="3.2.1 自定义头文件调用"></a>3.2.1 自定义头文件调用</h2><p>**需求:**设计头文件，可执行文件本身作为源文件。</p>
<p><strong>流程:</strong></p>
<ol>
<li>编写头文件；</li>
<li>编写可执行文件(同时也是源文件)；</li>
<li>编辑配置文件并执行。</li>
</ol>
<h3 id="1-头文件"><a href="#1-头文件" class="headerlink" title="1. 头文件"></a>1. 头文件</h3><p>在功能包下的 include&#x2F;功能包名 目录下新建头文件: hello.h，示例内容如下:</p>
<figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _HELLO_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _HELLO_H</span></span><br><span class="line"></span><br><span class="line">namespace hello_ns&#123;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloPub</span> &#123;</span></span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    <span class="type">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>注意:</strong></p>
<p>在 VScode 中，为了后续包含头文件时不抛出异常，请配置 .vscode 下 c_cpp_properties.json 的 includepath属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/home/用户/工作空间/src/功能包/include/**&quot;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-可执行文件"><a href="#2-可执行文件" class="headerlink" title="2.可执行文件"></a>2.可执行文件</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;plumbing_head/hello.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> hello_ns &#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">HelloPub::run</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;自定义头文件的使用....&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;test_head_node&quot;</span>);</span><br><span class="line">    hello_ns::HelloPub helloPub;</span><br><span class="line">    helloPub.<span class="built_in">run</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="3-配置文件"><a href="#3-配置文件" class="headerlink" title="3. 配置文件"></a>3. 配置文件</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">include_directories</span>(</span><br><span class="line"><span class="keyword">include</span></span><br><span class="line">  <span class="variable">$&#123;catkin_INCLUDE_DIRS&#125;</span></span><br><span class="line">)</span><br><span class="line">其他类似</span><br></pre></td></tr></table></figure>

<p>最后，编译并执行，控制台可以输出自定义的文本信息。</p>
<hr>
<h2 id="3-2-2-自定义源文件调用"><a href="#3-2-2-自定义源文件调用" class="headerlink" title="3.2.2 自定义源文件调用"></a>3.2.2 自定义源文件调用</h2><p>**需求:**设计头文件与源文件，在可执行文件中包含头文件。</p>
<p><strong>流程:</strong></p>
<ol>
<li>编写头文件；</li>
<li>编写源文件；</li>
<li>编写可执行文件；</li>
<li>编辑配置文件并执行。</li>
</ol>
<hr>
<h3 id="1-头文件-1"><a href="#1-头文件-1" class="headerlink" title="1. 头文件"></a>1. 头文件</h3><figure class="highlight h"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _HAHA_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _HAHA_H</span></span><br><span class="line"></span><br><span class="line">namespace hello_ns &#123;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">My</span> &#123;</span></span><br><span class="line"></span><br><span class="line">public:</span><br><span class="line">    <span class="type">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-源文件"><a href="#2-源文件" class="headerlink" title="2.源文件"></a>2.源文件</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;plumbing_head_src/hello.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> hello_ns&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">My::run</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;hello,head and src ...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-可执行文件"><a href="#3-可执行文件" class="headerlink" title="3.可执行文件"></a>3.可执行文件</h2><p>在 src 目录下新建文件: use_hello.cpp，示例内容如下:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;plumbing_head_src/hello.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;hahah&quot;</span>);</span><br><span class="line">    hello_ns::My my;</span><br><span class="line">    my.<span class="built_in">run</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-配置文件"><a href="#4-配置文件" class="headerlink" title="4.配置文件"></a>4.配置文件</h3><p>头文件与源文件相关配置:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">include_directories(</span><br><span class="line"><span class="keyword">include</span></span><br><span class="line">  $&#123;catkin_INCLUDE_DIRS&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">## 声明C++库</span></span><br><span class="line">add_library(head</span><br><span class="line">  <span class="keyword">include</span>/test_head_src/haha.h</span><br><span class="line">  src/haha.cpp</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">add_dependencies(head $&#123;$&#123;PROJECT_NAME&#125;_EXPORTED_TARGETS&#125; $&#123;catkin_EXPORTED_TARGETS&#125;)</span><br><span class="line"></span><br><span class="line">target_link_libraries(head</span><br><span class="line">  $&#123;catkin_LIBRARIES&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>可执行文件配置:</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">add_executable(use_head src/use_head.cpp)</span><br><span class="line"></span><br><span class="line">add_dependencies(use_head $&#123;$&#123;PROJECT_NAME&#125;_EXPORTED_TARGETS&#125; $&#123;catkin_EXPORTED_TARGETS&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#此处需要添加之前设置的 head 库</span></span><br><span class="line">target_link_libraries(use_head</span><br><span class="line">  head</span><br><span class="line">  $&#123;catkin_LIBRARIES&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/3.1%20%E5%B8%B8%E7%94%A8API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/3.1%20%E5%B8%B8%E7%94%A8API/" class="post-title-link" itemprop="url">3.1 常用API</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:45:02" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="3-1-常用API"><a href="#3-1-常用API" class="headerlink" title="3.1 常用API"></a>3.1 常用API</h1><p>**API（Application Programming  Interface，应用程序编程接口）**是一组定义了不同软件系统之间交互规则的接口，使得不同的应用程序能够彼此“沟通”和共享数据或功能。API充当着不同程序之间的中介，允许开发人员调用某些功能而不需要了解其实现细节。</p>
<h2 id="3-1-1-初始化"><a href="#3-1-1-初始化" class="headerlink" title="3.1.1 初始化"></a>3.1.1 初始化</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** @brief ROS初始化函数。</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 该函数可以解析并使用节点启动时传入的参数(通过参数设置节点名称、命名空间...) </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 该函数有多个重载版本，如果使用NodeHandle建议调用该版本。 </span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * \param argc 参数个数 --- 封装实参个数（n+1）</span></span><br><span class="line"><span class="comment"> * \param argv 参数列表 --- 封装参数的数组</span></span><br><span class="line"><span class="comment"> * \param name 节点名称，需要保证其唯一性，不允许包含命名空间</span></span><br><span class="line"><span class="comment"> * \param options 节点启动选项，被封装进了ros::init_options</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> 使用：</span></span><br><span class="line"><span class="comment"> 	1.argc 与 argv 的使用</span></span><br><span class="line"><span class="comment"> 		如果按照ROS的特定格式传入实参，ROS可以加以使用，可以设置全局参数，给节点命名</span></span><br><span class="line"><span class="comment"> 	2.options 的使用</span></span><br><span class="line"><span class="comment"> 		节点名称需要保证唯一，同一个节点不可重复启动</span></span><br><span class="line"><span class="comment"> 		需求：一个节点多次启动</span></span><br><span class="line"><span class="comment"> 		ros::init(argc,argv,&quot;talker&quot;,ros::init_options::AnonymousName);</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(<span class="type">int</span> &amp;argc, <span class="type">char</span> **argv, <span class="type">const</span> std::string&amp; name, <span class="type">uint32_t</span> options = <span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>ros::init(argc,argv,&quot;talker&quot;,ros::init_options::AnonymousName);</code>修改这一行代码，这个例子使用的是订阅发布通讯的案例，修改这一行代码之后，即可满足一个节点多次启动的需求。给节点加后缀，避免节点重名。</p>
<hr>
<h2 id="3-1-2-话题与服务相关对象"><a href="#3-1-2-话题与服务相关对象" class="headerlink" title="3.1.2 话题与服务相关对象"></a>3.1.2 话题与服务相关对象</h2><p>NodeHandle中有一个重要的作用是可以用于<strong>设置命名空间</strong>。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* \brief 根据话题生成发布对象</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 在 ROS master 注册并返回一个发布者对象，该对象可以发布消息</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 使用示例如下:</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*   ros::Publisher pub = handle.advertise&lt;std_msgs::Empty&gt;(&quot;my_topic&quot;, 1);</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* \param topic 发布消息使用的话题</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* \param queue_size 等待发送给订阅者的最大消息数量</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* \param latch (optional) 如果为 true,该话题发布的最后一条消息将被保存，并且后期当有订阅者连接时会将该消息发送给订阅者</span></span><br><span class="line"><span class="comment">	使用：</span></span><br><span class="line"><span class="comment">		以静态地图发布为例，可以使用固定频率发送地图数据，但是效率低，可以将latch设置为true，并且发布方之发送一次数据，订阅者连接时，会发送给订阅者，但是只发送一次。</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* \return 调用成功时，会返回一个发布对象</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">M</span>&gt;</span><br><span class="line"><span class="function">Publisher <span class="title">advertise</span><span class="params">(<span class="type">const</span> std::string&amp; topic, <span class="type">uint32_t</span> queue_size, <span class="type">bool</span> latch = <span class="literal">false</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<h2 id="3-1-3-回旋函数"><a href="#3-1-3-回旋函数" class="headerlink" title="3.1.3 回旋函数"></a>3.1.3 回旋函数</h2><p>在ROS程序中，频繁的使用了 ros::spin() 和 ros::spinOnce() 两个回旋函数，可以用于处理回调函数。</p>
<h5 id="1-spinOnce"><a href="#1-spinOnce" class="headerlink" title="1.spinOnce()"></a>1.spinOnce()</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * \brief 处理一轮回调</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 一般应用场景:</span></span><br><span class="line"><span class="comment"> *     在循环体内，处理所有可用的回调函数</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">ROSCPP_DECL <span class="type">void</span> <span class="title">spinOnce</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-spin"><a href="#2-spin" class="headerlink" title="2.spin()"></a>2.spin()</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment"> * \brief 进入循环处理回调 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">ROSCPP_DECL <span class="type">void</span> <span class="title">spin</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h5 id="3-二者比较"><a href="#3-二者比较" class="headerlink" title="3.二者比较"></a>3.二者比较</h5><p>**相同点:**二者都用于处理回调函数；</p>
<p>**不同点:**ros::spin() 是进入了循环执行回调函数，而 ros::spinOnce() 只会执行一次回调函数(没有循环)，在 ros::spin() 后的语句不会执行到，而 ros::spinOnce() 后的语句可以执行。</p>
<h2 id="3-1-4-时间"><a href="#3-1-4-时间" class="headerlink" title="3.1.4 时间"></a>3.1.4 时间</h2><p>ROS中时间相关的API是极其常用，比如:获取当前时刻、持续时间的设置、执行频率、休眠、定时器…都与时间相关。</p>
<h3 id="1-时刻"><a href="#1-时刻" class="headerlink" title="1.时刻"></a>1.时刻</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">    需求: 演示时间相关操作(获取当时时刻 + 设置指定时刻)</span></span><br><span class="line"><span class="comment">    实现:</span></span><br><span class="line"><span class="comment">        1. 准备(头文件\初始化节点\Nh)</span></span><br><span class="line"><span class="comment">        2. 获取当前时刻</span></span><br><span class="line"><span class="comment">        3. 设置指定时刻</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> * argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    ros::<span class="built_in">init</span>(argc,argv,<span class="string">&quot;hello_time&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;<span class="comment">//必须创建句柄，否则时间没有初始化，导致后续API调用失败</span></span><br><span class="line">    <span class="comment">//获取当前时刻</span></span><br><span class="line">    ros::Time right_now = ros::Time::<span class="built_in">now</span>();<span class="comment">//将当前时刻封装成对象</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;当前时刻:%.2f&quot;</span>,right_now.<span class="built_in">toSec</span>());<span class="comment">//获取距离 1970年01月01日 00:00:00 的秒数</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;当前时刻:%d&quot;</span>,right_now.sec);<span class="comment">//获取距离 1970年01月01日 00:00:00 的秒数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置指定时刻</span></span><br><span class="line">    <span class="function">ros::Time <span class="title">someTime</span><span class="params">(<span class="number">100</span>,<span class="number">100000000</span>)</span></span>;<span class="comment">// 参数1:秒数  参数2:纳秒</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;时刻:%.2f&quot;</span>,someTime.<span class="built_in">toSec</span>()); <span class="comment">//100.10</span></span><br><span class="line">    <span class="function">ros::Time <span class="title">someTime2</span><span class="params">(<span class="number">100.3</span>)</span></span>;<span class="comment">//直接传入 double 类型的秒数</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;时刻:%.2f&quot;</span>,someTime<span class="number">2.</span><span class="built_in">toSec</span>()); <span class="comment">//100.30</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2-持续时间"><a href="#2-持续时间" class="headerlink" title="2. 持续时间"></a>2. 持续时间</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//------------持续时间----------------</span></span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;------------------------------&quot;</span>);</span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;当前时刻:%.2f&quot;</span>,ros::Time::<span class="built_in">now</span>().<span class="built_in">toSec</span>());</span><br><span class="line"><span class="function">ros::Duration <span class="title">du</span><span class="params">(<span class="number">10</span>)</span></span>;<span class="comment">//持续10秒钟,参数是double类型的，以秒为单位</span></span><br><span class="line">du.<span class="built_in">sleep</span>();<span class="comment">//按照指定的持续时间休眠</span></span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;持续时间:%.2f&quot;</span>,du.<span class="built_in">toSec</span>());<span class="comment">//将持续时间换算成秒</span></span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;当前时刻:%.2f&quot;</span>,ros::Time::<span class="built_in">now</span>().<span class="built_in">toSec</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<h3 id="3-持续时间与时刻运算"><a href="#3-持续时间与时刻运算" class="headerlink" title="3.持续时间与时刻运算"></a>3.持续时间与时刻运算</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;------------------------------&quot;</span>);</span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;------------时间运算---------------&quot;</span>);</span><br><span class="line">ros::Time begin = ros::Time::<span class="built_in">now</span>();</span><br><span class="line"><span class="function">ros::Duration <span class="title">du1</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">ros::Time stop = begin + du1;</span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;开始时刻:%.2f&quot;</span>, begin.<span class="built_in">toSec</span>());</span><br><span class="line"><span class="built_in">ROS_INFO</span>(<span class="string">&quot;结束时刻:%.2f&quot;</span>, stop.<span class="built_in">toSec</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-设置运行频率"><a href="#4-设置运行频率" class="headerlink" title="4. 设置运行频率"></a>4. 设置运行频率</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ros::Rate <span class="title">rate</span><span class="params">(<span class="number">1</span>)</span></span>;<span class="comment">//指定频率</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;-----------code----------&quot;</span>);</span><br><span class="line">    rate.<span class="built_in">sleep</span>();<span class="comment">//休眠，休眠时间 = 1 / 频率。</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-定时器"><a href="#5-定时器" class="headerlink" title="5. 定时器"></a>5. 定时器</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">ros::NodeHandle nh;<span class="comment">//必须创建句柄，否则时间没有初始化，导致后续API调用失败</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// ROS 定时器</span></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">* \brief 创建一个定时器，按照指定频率调用回调函数。</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* \param period 时间间隔</span></span><br><span class="line"><span class="comment">* \param callback 回调函数</span></span><br><span class="line"><span class="comment">* \param oneshot 如果设置为 true,只执行一次回调函数，设置为 false,就循环执行。</span></span><br><span class="line"><span class="comment">* \param autostart 如果为true，返回已经启动的定时器,设置为 false，需要手动启动。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> <span class="comment">//Timer createTimer(Duration period, const TimerCallback&amp; callback, bool oneshot = false,</span></span><br><span class="line"> <span class="comment">//                bool autostart = true) const;</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// ros::Timer timer = nh.createTimer(ros::Duration(0.5),doSomeThing);</span></span><br><span class="line"> ros::Timer timer = nh.<span class="built_in">createTimer</span>(ros::<span class="built_in">Duration</span>(<span class="number">0.5</span>),doSomeThing,<span class="literal">true</span>);<span class="comment">//只执行一次</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">// ros::Timer timer = nh.createTimer(ros::Duration(0.5),doSomeThing,false,false);//需要手动启动</span></span><br><span class="line"> <span class="comment">// timer.start();</span></span><br><span class="line"> ros::<span class="built_in">spin</span>(); <span class="comment">//必须 spin</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>定时器的回调函数</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">doSomeThing</span><span class="params">(<span class="type">const</span> ros::TimerEvent &amp;event)</span></span>&#123;</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;-------------&quot;</span>);</span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;event:%s&quot;</span>,std::<span class="built_in">to_string</span>(event.current_real.<span class="built_in">toSec</span>()).<span class="built_in">c_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-1-5-其他函数"><a href="#3-1-5-其他函数" class="headerlink" title="3.1.5 其他函数"></a>3.1.5 其他函数</h2><p>在发布实现时，一般会循环发布消息，循环的判断条件一般由节点状态来控制，C++中可以通过 ros::ok() 来判断节点状态是否正常，而 python 中则通过 rospy.is_shutdown() 来实现判断，导致节点退出的原因主要有如下几种:</p>
<ul>
<li>节点接收到了关闭信息，比如常用的 ctrl + c 快捷键就是关闭节点的信号；</li>
<li>同名节点启动，导致现有节点退出；</li>
<li>程序中的其他部分调用了节点关闭相关的API(C++中是ros::shutdown()，python中是rospy.signal_shutdown())</li>
</ul>
<p>另外，日志相关的函数也是极其常用的，在ROS中日志被划分成如下级别:</p>
<ul>
<li><p>DEBUG(调试):只在调试时使用，此类消息不会输出到控制台；</p>
</li>
<li><p>INFO(信息):标准消息，一般用于说明系统内正在执行的操作；</p>
</li>
<li><p>WARN(警告):提醒一些异常情况，但程序仍然可以执行；</p>
</li>
<li><p>ERROR(错误):提示错误信息，此类错误会影响程序运行；</p>
</li>
<li><p>FATAL(严重错误):此类错误将阻止节点继续运行</p>
</li>
<li><h3 id="1-节点状态"><a href="#1-节点状态" class="headerlink" title="1. 节点状态"></a>1. 节点状态</h3></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** \brief 检查节点是否已经退出</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  ros::shutdown() 被调用且执行完毕后，该函数将会返回 false</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * \return true 如果节点还健在, false 如果节点已经火化了。</span></span><br><span class="line"><span class="comment"> */</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (count &gt;= <span class="number">20</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            ros::<span class="built_in">shutdown</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//---------------------</span></span><br><span class="line">        </span><br></pre></td></tr></table></figure>

<p>发布到20次就自动关闭节点</p>
<hr>
<h3 id="2-日志相关"><a href="#2-日志相关" class="headerlink" title="2.日志相关"></a>2.日志相关</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">setlocale</span>(LC_ALL, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    ros::<span class="built_in">init</span> (argc,argv,<span class="string">&quot;hello_logs&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//日志输出</span></span><br><span class="line">    <span class="built_in">ROS_DEBUG</span>(<span class="string">&quot;hello,DEBUG&quot;</span>); <span class="comment">//不会输出</span></span><br><span class="line">    <span class="built_in">ROS_INFO</span>(<span class="string">&quot;hello,INFO&quot;</span>); <span class="comment">//默认白色字体</span></span><br><span class="line">    <span class="built_in">ROS_WARN</span>(<span class="string">&quot;Hello,WARN&quot;</span>); <span class="comment">//默认黄色字体</span></span><br><span class="line">    <span class="built_in">ROS_ERROR</span>(<span class="string">&quot;hello,ERROR&quot;</span>);<span class="comment">//默认红色字体</span></span><br><span class="line">    <span class="built_in">ROS_FATAL</span>(<span class="string">&quot;hello,FATAL&quot;</span>);<span class="comment">//默认红色字体</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/4.2%20ROS%E8%8A%82%E7%82%B9%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86launch%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/4.2%20ROS%E8%8A%82%E7%82%B9%E8%BF%90%E8%A1%8C%E7%AE%A1%E7%90%86launch%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url">4.2 ROS节点运行管理launch文件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:47:47" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="4-2-ROS节点运行管理launch文件"><a href="#4-2-ROS节点运行管理launch文件" class="headerlink" title="4.2 ROS节点运行管理launch文件"></a>4.2 ROS节点运行管理launch文件</h1><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a><strong>概念</strong></h4><p>launch 文件是一个 XML 格式的文件，可以启动本地和远程的多个节点，还可以在参数服务器中设置参数。</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a><strong>作用</strong></h4><p>简化节点的配置与启动，提高ROS程序的启动效率。</p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a><strong>使用</strong></h4><p>以 turtlesim 为例演示</p>
<hr>
<h4 id="1-新建launch文件"><a href="#1-新建launch文件" class="headerlink" title="1. 新建launch文件"></a>1. 新建launch文件</h4><p>创建一个<strong>launch01_basic</strong>功能包，依赖于roscpp rospy std_msgs tuttlesim</p>
<p>在功能包下添加 launch目录, 目录下新建 start_turtle.launch 文件，编辑 launch 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;launch&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtlesim_node&quot;     name=&quot;myTurtle&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtle_teleop_key&quot;  name=&quot;myTurtleContro&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">&lt;/launch&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-调用-launch-文件"><a href="#2-调用-launch-文件" class="headerlink" title="2.调用 launch 文件"></a>2.调用 launch 文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch launch01_basic start_turtle.launch </span><br></pre></td></tr></table></figure>

<p>这样就可以直接启动乌龟控制节点</p>
<hr>
<h2 id="4-2-1-launch-文件标签之-launch"><a href="#4-2-1-launch-文件标签之-launch" class="headerlink" title="4.2.1 launch 文件标签之 launch"></a>4.2.1 launch 文件标签之 launch</h2><p><code>&lt;launch&gt;</code>标签是所有 launch 文件的根标签，充当其他标签的容器</p>
<h4 id="1-属性"><a href="#1-属性" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p><code>deprecated = &quot;弃用声明&quot;</code></p>
<p>告知用户当前 launch 文件已经弃用</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;launch deprecated=&quot;次文件已经过时！&quot;&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtlesim_node&quot;     name=&quot;myTurtle&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtle_teleop_key&quot;  name=&quot;myTurtleContro&quot; output=&quot;screen&quot; /&gt;</span><br><span class="line">&lt;/launch&gt;</span><br></pre></td></tr></table></figure>

<p>虽然能运行，但是会给出警告。</p>
<h4 id="2-子级标签"><a href="#2-子级标签" class="headerlink" title="2.子级标签"></a>2.子级标签</h4><p>所有其它标签都是launch的子级</p>
<hr>
<h2 id="4-2-2-launch-文件标签之node"><a href="#4-2-2-launch-文件标签之node" class="headerlink" title="4.2.2 launch 文件标签之node"></a>4.2.2 launch 文件标签之node</h2><h4 id="1-属性-1"><a href="#1-属性-1" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>pkg&#x3D;”包名”</p>
<p>节点所属的包</p>
</li>
<li><p>type&#x3D;”nodeType”</p>
<p>节点类型(与之相同名称的可执行文件)</p>
</li>
<li><p>name&#x3D;”nodeName”</p>
<p>节点名称(在 ROS 网络拓扑中节点的名称)</p>
</li>
<li><p>args&#x3D;”xxx xxx xxx” (可选)</p>
<p>将参数传递给节点</p>
</li>
<li><p>machine&#x3D;”机器名”</p>
<p>在指定机器上启动节点</p>
</li>
<li><p>respawn&#x3D;”true | false” (可选)</p>
<p>如果节点退出，是否自动重启</p>
</li>
<li><p>respawn_delay&#x3D;” N” (可选)</p>
<p>如果 respawn 为 true, 那么延迟 N 秒后启动节点</p>
</li>
<li><p>required&#x3D;”true | false” (可选)</p>
<p>该节点是否必须，如果为 true,那么如果该节点退出，将杀死整个 roslaunch</p>
</li>
<li><p>ns&#x3D;”xxx” (可选)</p>
<p>在指定命名空间 xxx 中启动节点</p>
</li>
<li><p>clear_params&#x3D;”true | false” (可选)</p>
<p>在启动前，删除节点的私有空间的所有参数</p>
</li>
<li><p>output&#x3D;”log | screen” (可选)</p>
<p>日志发送目标，可以设置为 log 日志文件，或 screen 屏幕,默认是 log</p>
</li>
</ul>
<h4 id="2-子级标签-1"><a href="#2-子级标签-1" class="headerlink" title="2.子级标签"></a>2.子级标签</h4><ul>
<li>env 环境变量设置</li>
<li>remap 重映射节点名称</li>
<li>rosparam 参数设置</li>
<li>param 参数设置</li>
</ul>
<h2 id="4-2-3-launch-文件标签之include"><a href="#4-2-3-launch-文件标签之include" class="headerlink" title="4.2.3 launch 文件标签之include"></a>4.2.3 launch 文件标签之include</h2><p><code>include</code>标签用于将另一个 xml 格式的 launch 文件导入到当前文件</p>
<h4 id="1-属性-2"><a href="#1-属性-2" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>file&#x3D;”<strong>$(find 包名)&#x2F;xxx&#x2F;xxx.launch</strong>“</p>
<p>要包含的文件路径</p>
</li>
<li><p>ns&#x3D;”xxx” (可选)</p>
<p>在指定命名空间导入文件</p>
</li>
</ul>
<h4 id="2-子级标签-2"><a href="#2-子级标签-2" class="headerlink" title="2.子级标签"></a>2.子级标签</h4><ul>
<li>env 环境变量设置</li>
<li>arg 将参数传递给被包含的文件</li>
</ul>
<hr>
<p>新建文件 <strong>start_turtle_use.launch</strong> </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--需要复用 start_turtle.launch--&gt;</span><br><span class="line">&lt;launch&gt;</span><br><span class="line">    &lt;include file=&quot;$(find launch01_basic)/launch/start_turtle.launch&quot; /&gt;</span><br><span class="line">&lt;/launch&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-2-4-launch文件标签之remap"><a href="#4-2-4-launch文件标签之remap" class="headerlink" title="4.2.4 launch文件标签之remap"></a>4.2.4 launch文件标签之remap</h2><h4 id="1-属性-3"><a href="#1-属性-3" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>from&#x3D;”xxx”</p>
<p>原始话题名称</p>
</li>
<li><p>to&#x3D;”yyy”</p>
<p>目标名称</p>
</li>
</ul>
<h4 id="2-teleop-twist-keyboard安装使用"><a href="#2-teleop-twist-keyboard安装使用" class="headerlink" title="2.teleop_twist_keyboard安装使用"></a>2.teleop_twist_keyboard安装使用</h4><p><strong>安装：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install ros-noetic-teleop-twist-keyboard</span><br></pre></td></tr></table></figure>

<p><strong>使用</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roscore                                                  </span><br><span class="line">rosrun teleop_twist_keyboard teleop_twist_keyboard.py</span><br></pre></td></tr></table></figure>

<p>按照例程的操作不用打开roscore，launch文件已经启动了。安装之后直接先运行launch文件，再执行第二步即可</p>
<p><img src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27%2015-54-49%20%E7%9A%84%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png"></p>
<p>修改start_turtle_launch文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;launch&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtlesim_node&quot; name=&quot;myTurtle&quot; output=&quot;screen&quot;&gt;</span><br><span class="line">        &lt;remap from=&quot;/turtle1/cmd_vel&quot; to=&quot;/cmd_vel&quot;/&gt;</span><br><span class="line">    &lt;/node&gt;</span><br><span class="line">    &lt;node pkg=&quot;turtlesim&quot; type=&quot;turtle_teleop_key&quot; name=&quot;myTurtleContro&quot; output=&quot;screen&quot;/&gt;</span><br><span class="line">&lt;/launch&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>再次启动launch文件即可显示</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 16-08-59 的屏幕截图.png)</p>
<p>接下来，就可以操纵乌龟运动了！</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 16-08-59 的屏幕截图.png)</p>
<p>看计算图比较清晰。</p>
<hr>
<h2 id="4-2-5-launch文件标签之param"><a href="#4-2-5-launch文件标签之param" class="headerlink" title="4.2.5 launch文件标签之param"></a>4.2.5 launch文件标签之param</h2><h4 id="1-属性-4"><a href="#1-属性-4" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>name&#x3D;”命名空间&#x2F;参数名”</p>
<p>参数名称，可以包含命名空间</p>
</li>
<li><p>value&#x3D;”xxx” (可选)</p>
<p>定义参数值，如果此处省略，必须指定外部文件作为参数源</p>
</li>
<li><p>type&#x3D;”str | int | double | bool | yaml” (可选)</p>
<p>指定参数类型，如果未指定，roslaunch 会尝试确定参数类型，规则如下:</p>
<ul>
<li>如果包含 ‘.’ 的数字解析未浮点型，否则为整型</li>
<li>“true” 和 “false” 是 bool 值(不区分大小写)</li>
<li>其他是字符串</li>
</ul>
</li>
</ul>
<hr>
<p>设置不同格式的参数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--格式1：launch下，node外--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param_A&quot;</span> <span class="attr">type</span>=<span class="string">&quot;int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtle&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;/turtle1/cmd_vel&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/cmd_vel&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--格式2：launch下，node内--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param_B&quot;</span> <span class="attr">type</span>=<span class="string">&quot;double&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3.14&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtleContro&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行，新打开一个终端查看参数列表<code>rosparam list</code></p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 16-08-59 的屏幕截图.png)</p>
<p>可以正常获取值</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 16-29-41 的屏幕截图.png)</p>
<h2 id="4-2-6-launch文件标签之rosparam"><a href="#4-2-6-launch文件标签之rosparam" class="headerlink" title="4.2.6 launch文件标签之rosparam"></a>4.2.6 launch文件标签之rosparam</h2><p><code>&lt;rosparam&gt;</code>标签可以从 YAML 文件导入参数，或将参数导出到 YAML 文件，也可以用来删除参数，<code>&lt;rosparam&gt;</code>标签在<code>&lt;node&gt;</code>标签中时被视为私有。</p>
<h4 id="1-属性-5"><a href="#1-属性-5" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>command&#x3D;”load | dump | delete” (可选，默认 load)</p>
<p>加载、导出或删除参数</p>
</li>
<li><p>file&#x3D;”$(find xxxxx)&#x2F;xxx&#x2F;yyy….”</p>
<p>加载或导出到的 yaml 文件</p>
</li>
<li><p>param&#x3D;”参数名称”</p>
</li>
<li><p>ns&#x3D;”命名空间” (可选）</p>
</li>
</ul>
<hr>
<p>在<code>launch</code>文件目录下新建一个<code>params.yaml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bg_R:</span> <span class="number">100</span></span><br><span class="line"><span class="attr">bg_G:</span> <span class="number">50</span></span><br><span class="line"><span class="attr">bg_B:</span> <span class="number">255</span></span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--格式1：launch下，node外--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param_A&quot;</span> <span class="attr">type</span>=<span class="string">&quot;int&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--rosparam 使用： 参数服务器--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--格式1：launch 下，node外--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">command</span>=<span class="string">&quot;load&quot;</span> <span class="attr">file</span>=<span class="string">&quot;$(find launch01_basic)/launch/params.yaml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtle&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;/turtle1/cmd_vel&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/cmd_vel&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--格式2：launch下，node内--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;param_B&quot;</span> <span class="attr">type</span>=<span class="string">&quot;double&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3.14&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--格式2：launch下，node内--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rosparam</span> <span class="attr">command</span>=<span class="string">&quot;load&quot;</span> <span class="attr">file</span>=<span class="string">&quot;$(find launch01_basic)/launch/params.yaml&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtleContro&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 16-55-34 的屏幕截图.png)</p>
<p>同时还有导出、或者删除参数的指令，这里不再赘述。</p>
<hr>
<h2 id="4-2-7-launch文件标签之group"><a href="#4-2-7-launch文件标签之group" class="headerlink" title="4.2.7 launch文件标签之group"></a>4.2.7 launch文件标签之group</h2><p><code>&lt;group&gt;</code>标签可以对节点分组，具有 ns 属性，可以让节点归属某个命名空间</p>
<h4 id="1-属性-6"><a href="#1-属性-6" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>ns&#x3D;”名称空间” (可选)</p>
</li>
<li><p>clear_params&#x3D;”true | false” (可选)</p>
<p>启动前，是否删除组名称空间的所有参数(慎用….此功能危险)</p>
</li>
</ul>
<hr>
<p>可以通过group 同时启动两个乌龟GUI</p>
<p>首先在<code>launch</code>文件下新建<code>turtles.launch</code>文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--启动两对乌龟GUI 与 键盘控制节点--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">ns</span>=<span class="string">&quot;first&quot;</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtle&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtleContro&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">group</span> <span class="attr">ns</span>=<span class="string">&quot;second&quot;</span>&gt;</span>      </span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtle&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtle_teleop_key&quot;</span> <span class="attr">name</span>=<span class="string">&quot;myTurtleContro&quot;</span> <span class="attr">output</span>=<span class="string">&quot;screen&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">group</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>运行之后就可以显示两个乌龟GUI了</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 17-16-47 的屏幕截图.png)</p>
<hr>
<h2 id="4-2-8-launch-文件标签之arg"><a href="#4-2-8-launch-文件标签之arg" class="headerlink" title="4.2.8 launch 文件标签之arg"></a>4.2.8 launch 文件标签之arg</h2><p><code>&lt;arg&gt;</code>标签是用于动态传参，类似于函数的参数，可以增强launch文件的灵活性</p>
<h4 id="1-属性-7"><a href="#1-属性-7" class="headerlink" title="1.属性"></a>1.属性</h4><ul>
<li><p>name&#x3D;”参数名称”</p>
</li>
<li><p>default&#x3D;”默认值” (可选)</p>
</li>
<li><p>value&#x3D;”数值” (可选)</p>
<p>不可以与 default 并存</p>
</li>
<li><p>doc&#x3D;”描述”</p>
<p>参数说明</p>
</li>
</ul>
<hr>
<p><code>launch</code>文件夹下新建文件<code>arg.launch</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 需求：演示 arg 的使用，需要设置多个参数，使用的是同一个值（小车长度） --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;param name=&quot;A&quot; value=&quot;0.5&quot; /&gt;</span></span><br><span class="line"><span class="comment">    &lt;param name=&quot;B&quot; value=&quot;0.5&quot; /&gt;</span></span><br><span class="line"><span class="comment">    &lt;param name=&quot;C&quot; value=&quot;0.5&quot; /&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">arg</span> <span class="attr">name</span>=<span class="string">&quot;car_length&quot;</span> <span class="attr">defalut</span>=<span class="string">&quot;0.55&quot;</span> /&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;A&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg car_length)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;B&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg car_length)&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;C&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$(arg car_length)&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<p>预先启动<code>roscore</code>,再执行 <code>roslaunch launch01_basic arg.launch</code> 输入<code>rosparam list</code>可以显示：</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 19-52-45 的屏幕截图.png)</p>
<p>使用<code>roslaunch launch01_basic arg.launch car_length:=0.6</code>可以修改参数。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/4.4%20ROS%E8%8A%82%E7%82%B9%E5%90%8D%E7%A7%B0%E9%87%8D%E5%90%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/4.4%20ROS%E8%8A%82%E7%82%B9%E5%90%8D%E7%A7%B0%E9%87%8D%E5%90%8D/" class="post-title-link" itemprop="url">4.4 ROS节点名称重名</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:49:27" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="4-4-ROS节点名称重名"><a href="#4-4-ROS节点名称重名" class="headerlink" title="4.4 ROS节点名称重名"></a>4.4 ROS节点名称重名</h1><p>在ROS中给出的解决策略是使用<strong>命名空间</strong>或<strong>名称重映射</strong>。</p>
<hr>
<p>命名空间就是为名称添加前缀，名称重映射是为名称起别名。这两种策略都可以解决节点重名问题，两种策略的实现途径有多种:</p>
<ul>
<li>rosrun 命令</li>
<li>launch 文件</li>
<li>编码实现</li>
</ul>
<hr>
<h2 id="4-4-1-rosrun设置命名空间与重映射"><a href="#4-4-1-rosrun设置命名空间与重映射" class="headerlink" title="4.4.1 rosrun设置命名空间与重映射"></a>4.4.1 rosrun设置命名空间与重映射</h2><p>如果不做操作，无法启动两个乌龟节点。</p>
<hr>
<h3 id="1-rosrun设置命名空间"><a href="#1-rosrun设置命名空间" class="headerlink" title="1. rosrun设置命名空间"></a>1. rosrun设置命名空间</h3><h4 id="1-1-设置命名空间演示"><a href="#1-1-设置命名空间演示" class="headerlink" title="1.1 设置命名空间演示"></a>1.1 设置命名空间演示</h4><p>语法: rosrun 包名 节点名 __ns:&#x3D;新名称</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rosrun turtlesim turtlesim_node __ns:=/xxx</span><br><span class="line">rosrun turtlesim turtlesim_node __ns:=/yyy</span><br></pre></td></tr></table></figure>

<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28</a> 15-58-42 的屏幕截图.png)</p>
<h4 id="1-2-运行结果"><a href="#1-2-运行结果" class="headerlink" title="1.2 运行结果"></a>1.2 运行结果</h4><p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28</a> 15-59-47 的屏幕截图.png)</p>
<hr>
<h3 id="2-rosrun名称重映射"><a href="#2-rosrun名称重映射" class="headerlink" title="2. rosrun名称重映射"></a>2. rosrun名称重映射</h3><h4 id="2-1-起别名"><a href="#2-1-起别名" class="headerlink" title="2.1 起别名"></a>2.1 起别名</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun turtlesim turtlesim_node __name:=xiaowang</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun turtlesim turtlesim_node __name:=xiaoli</span><br></pre></td></tr></table></figure>

<h4 id="2-2-运行结果"><a href="#2-2-运行结果" class="headerlink" title="2.2 运行结果"></a>2.2 运行结果</h4><p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28</a> 16-06-36 的屏幕截图.png)</p>
<hr>
<h3 id="3-rosrun命名空间与名称重映射叠加"><a href="#3-rosrun命名空间与名称重映射叠加" class="headerlink" title="3.rosrun命名空间与名称重映射叠加"></a>3.rosrun命名空间与名称重映射叠加</h3><h4 id="3-1设置命名空间同时名称重映射"><a href="#3-1设置命名空间同时名称重映射" class="headerlink" title="3.1设置命名空间同时名称重映射"></a>3.1设置命名空间同时名称重映射</h4><p>语法: rosrun 包名 节点名 __ns:&#x3D;新名称 __name:&#x3D;新名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun turtlesim turtlesim_node __ns:=/xxx __name:=tn</span><br></pre></td></tr></table></figure>

<h4 id="3-2运行结果"><a href="#3-2运行结果" class="headerlink" title="3.2运行结果"></a>3.2运行结果</h4><p><code>rosnode list</code>查看节点信息,显示结果:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/xxx/tn</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-4-2-launch文件设置命名空间与重映射"><a href="#4-4-2-launch文件设置命名空间与重映射" class="headerlink" title="4.4.2 launch文件设置命名空间与重映射"></a>4.4.2 launch文件设置命名空间与重映射</h2><p>新建功能包 <code>rename_01</code> 以及相关依赖。新建<code>launch</code>文件夹，已经<code>start_turtle.launch</code> 文件，启动多个乌龟GUI节点。</p>
<h3 id="1-launch-文件"><a href="#1-launch-文件" class="headerlink" title="1.launch 文件"></a>1.launch 文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--启动多个乌龟GUI--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;t1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;t2&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;t1&quot;</span> <span class="attr">ns</span>=<span class="string">&quot;hello&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;t2&quot;</span> <span class="attr">ns</span>=<span class="string">&quot;haha&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果报错，执行前一节相同的操作，删除<code>build</code>和<code>devel</code>文件夹，重新<code>catkin_make</code>，即可解决。</p>
<h3 id="2-运行"><a href="#2-运行" class="headerlink" title="2. 运行"></a>2. 运行</h3><p><code>rosnode list</code>查看节点信息,显示结果:</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28</a> 16-31-14 的屏幕截图.png)</p>
<hr>
<h2 id="4-4-3-编码设置命名空间和映射"><a href="#4-4-3-编码设置命名空间和映射" class="headerlink" title="4.4.3 编码设置命名空间和映射"></a>4.4.3 编码设置命名空间和映射</h2><p>如果自定义节点实现，那么可以更灵活的设置命名空间与重映射实现。</p>
<hr>
<h3 id="1-C-实现-重映射"><a href="#1-C-实现-重映射" class="headerlink" title="1.C++ 实现:重映射"></a>1.C++ 实现:重映射</h3><h4 id="1-1名称别名设置"><a href="#1-1名称别名设置" class="headerlink" title="1.1名称别名设置"></a>1.1名称别名设置</h4><p>核心代码:<code>ros::init(argc,argv,&quot;zhangsan&quot;,ros::init_options::AnonymousName);</code></p>
<h4 id="1-2执行"><a href="#1-2执行" class="headerlink" title="1.2执行"></a>1.2执行</h4><p>会在名称后面添加时间戳。</p>
<h3 id="2-C-实现-命名空间"><a href="#2-C-实现-命名空间" class="headerlink" title="2.C++ 实现:命名空间"></a>2.C++ 实现:命名空间</h3><h4 id="2-1命名空间设置"><a href="#2-1命名空间设置" class="headerlink" title="2.1命名空间设置"></a>2.1命名空间设置</h4><p>核心代码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">std::map&lt;std::string, std::string&gt; map;</span><br><span class="line">map[&quot;__ns&quot;] = &quot;xxxx&quot;;</span><br><span class="line">ros::init(map,&quot;wangqiang&quot;);</span><br></pre></td></tr></table></figure>

<h4 id="2-2执行"><a href="#2-2执行" class="headerlink" title="2.2执行"></a>2.2执行</h4><p>节点名称设置了命名空间。</p>
<hr>
<h3 id="3-Python-实现-重映射"><a href="#3-Python-实现-重映射" class="headerlink" title="3.Python 实现:重映射"></a>3.Python 实现:重映射</h3><h4 id="3-1名称别名设置"><a href="#3-1名称别名设置" class="headerlink" title="3.1名称别名设置"></a>3.1名称别名设置</h4><p>核心代码:<code>rospy.init_node(&quot;lisi&quot;,anonymous=True)</code></p>
<h4 id="3-2执行"><a href="#3-2执行" class="headerlink" title="3.2执行"></a>3.2执行</h4><p>会在节点名称后缀时间戳。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/4.3%20ROS%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4%E8%A6%86%E7%9B%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/4.3%20ROS%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4%E8%A6%86%E7%9B%96/" class="post-title-link" itemprop="url">4.3 ROS工作空间覆盖</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:48:33" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="4-3-ROS工作空间覆盖"><a href="#4-3-ROS工作空间覆盖" class="headerlink" title="4.3 ROS工作空间覆盖"></a>4.3 ROS工作空间覆盖</h3><p>所谓工作空间覆盖，是指不同工作空间中，存在重名的功能包的情形。</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a><strong>实现</strong></h4><p>0.新建工作空间A与工作空间B，两个工作空间中都创建功能包: turtlesim。不记得怎么操作可以往前看笔记。</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 20-28-59 的屏幕截图.png)</p>
<p>1.在 ~&#x2F;.bashrc 文件下<strong>追加</strong>当前工作空间的 bash 格式如下:</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 20-29-42 的屏幕截图.png)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /opt/ros/noetic/setup.bash</span><br><span class="line"><span class="built_in">source</span> /home/chenguoqing/demo00_ws/devel/setup.bash</span><br><span class="line"><span class="built_in">source</span> /home/chenguoqing/demo01_ws/devel/setup.bash</span><br></pre></td></tr></table></figure>

<p>2.新开命令行:<code>source .bashrc</code>加载环境变量</p>
<p>会自动补齐之前在bashrc下第二次输入的bash的cpp文件</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 20-52-31 的屏幕截图.png)</p>
<p>3.查看ROS环境环境变量<code>echo $ROS_PACKAGE_PATH</code></p>
<blockquote>
<p>当在 .bashrc 文件中 source 多个工作空间后，可能出现的情况，在 ROS PACKAGE PATH  中只包含两个工作空间，可以删除自定义工作空间的 build 与 devel 目录，重新 catkin_make，然后重新载入 .bashrc  文件，问题解决。</p>
</blockquote>
<p>结果:自定义工作空间B:自定义空间A:系统内置空间</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-27</a> 21-06-14 的屏幕截图.png)</p>
<p>4.调用命令:<code>roscd turtlesim</code>会进入自定义工作空间B</p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a><strong>原因</strong></h4><p>ROS 会解析 .bashrc 文件，并生成 ROS_PACKAGE_PATH ROS包路径，该变量中按照 .bashrc  中配置设置工作空间优先级，在设置时需要遵循一定的原则:ROS_PACKAGE_PATH 中的值，和 .bashrc  的配置顺序相反—&gt;后配置的优先级更高，如果更改自定义空间A与自定义空间B的source顺序，那么调用时，将进入工作空间A。</p>
<h4 id="结论"><a href="#结论" class="headerlink" title="结论"></a><strong>结论</strong></h4><p>功能包重名时，会按照 ROS_PACKAGE_PATH 查找，配置在前的会优先执行。</p>
<h4 id="隐患"><a href="#隐患" class="headerlink" title="隐患"></a><strong>隐患</strong></h4><p>存在安全隐患，比如当前工作空间B优先级更高，意味着当程序调用 turtlesim 时，不会调用工作空间A也不会调用系统内置的  turtlesim，如果工作空间A在实现时有其他功能包依赖于自身的  turtlesim，而按照ROS工作空间覆盖的涉及原则，那么实际执行时将会调用工作空间B的turtlesim，从而导致执行异常，出现安全隐患。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/03/31/4.5%20ROS%E8%AF%9D%E9%A2%98%E5%90%8D%E7%A7%B0%E8%AE%BE%E7%BD%AE(1)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20250315215109.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Do not Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2025/03/31/4.5%20ROS%E8%AF%9D%E9%A2%98%E5%90%8D%E7%A7%B0%E8%AE%BE%E7%BD%AE(1)/" class="post-title-link" itemprop="url">4.5 ROS话题名称设置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-03-31 00:00:00 / 修改时间：18:50:06" itemprop="dateCreated datePublished" datetime="2025-03-31T00:00:00+08:00">2025-03-31</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ROS%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">ROS学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="4-5-ROS话题名称设置"><a href="#4-5-ROS话题名称设置" class="headerlink" title="4.5 ROS话题名称设置"></a>4.5 ROS话题名称设置</h1><p>在ROS中节点名称可能出现重名的情况，同理话题名称也可能重名。</p>
<blockquote>
<p>在 ROS 中节点终端，不同的节点之间通信都依赖于话题，话题名称也可能出现重复的情况，这种情况下，系统虽然不会抛出异常，但是可能导致订阅的消息非预期的，从而导致节点运行异常。这种情况下需要将两个节点的话题名称由相同修改为不同。</p>
<p>又或者，两个节点是可以通信的，两个节点之间使用了相同的消息类型，但是由于，话题名称不同，导致通信失败。这种情况下需要将两个节点的话题名称由不同修改为相同。</p>
</blockquote>
<p>在实际应用中，按照逻辑，有些时候可能需要将相同的话题名称设置为不同，也有可能将不同的话题名设置为相同。在ROS中给出的解决策略与节点名称重命类似，也是使用名称重映射或为名称添加前缀。根据前缀不同，有全局、相对、和私有三种类型之分。</p>
<ul>
<li>全局(参数名称直接参考ROS系统，与节点命名空间平级)</li>
<li>相对(参数名称参考的是节点的命名空间，与节点名称平级)</li>
<li>私有(参数名称参考节点名称，是节点名称的子级)</li>
</ul>
<hr>
<p>名称重映射是为名称起别名，为名称添加前缀，该实现比节点重名更复杂些，不单是使用命名空间作为前缀、还可以使用节点名称最为前缀。两种策略的实现途径有多种:</p>
<ul>
<li>rosrun 命令</li>
<li>launch 文件</li>
<li>编码实现</li>
</ul>
<hr>
<h2 id="4-5-1-rosrun设置话题重映射"><a href="#4-5-1-rosrun设置话题重映射" class="headerlink" title="4.5.1 rosrun设置话题重映射"></a>4.5.1 rosrun设置话题重映射</h2><p>rosrun名称重映射语法: <strong>rorun 包名 节点名 话题名:&#x3D;新话题名称</strong></p>
<p>实现teleop_twist_keyboard与乌龟显示节点通信方案由两种：</p>
<h3 id="1-方案1"><a href="#1-方案1" class="headerlink" title="1.方案1"></a>1.方案1</h3><p>将 teleop_twist_keyboard 节点的话题设置为<code>/turtle1/cmd_vel</code></p>
<p>启动键盘控制节点:<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py /cmd_vel:=/turtle1/cmd_vel</code></p>
<p>启动乌龟显示节点: <code>rosrun turtlesim turtlesim_node</code></p>
<p>二者可以实现正常通信</p>
<p>使用<code>rostopic list</code>可以查看话题改变</p>
<p>![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28</a> 16-45-50 的屏幕截图.png)</p>
<hr>
<h3 id="2-方案2"><a href="#2-方案2" class="headerlink" title="2.方案2"></a>2.方案2</h3><p>将乌龟显示节点的话题设置为 <code>/cmd_vel</code></p>
<p>启动键盘控制节点:<code>rosrun teleop_twist_keyboard teleop_twist_keyboard.py</code></p>
<p>启动乌龟显示节点: <code>rosrun turtlesim turtlesim_node /turtle1/cmd_vel:=/cmd_vel</code></p>
<p>二者可以实现正常通信</p>
<h2 id="4-5-2-launch文件设置话题重映射"><a href="#4-5-2-launch文件设置话题重映射" class="headerlink" title="4.5.2 launch文件设置话题重映射"></a>4.5.2 launch文件设置话题重映射</h2><p>与之前类似，新建<code>rename02_topic</code> 功能包，新建launch文件夹以及<code>start.launch</code>文件</p>
<hr>
<h3 id="1-方案1-1"><a href="#1-方案1-1" class="headerlink" title="1.方案1"></a>1.方案1</h3><p>将 teleop_twist_keyboard 节点的话题设置为<code>/turtle1/cmd_vel</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--键盘控制乌龟运动--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--将 teleop_twist_keyboard 节点的话题设置为/turtle1/cmd_vel--&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;t1&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;teleop_twist_keyboard&quot;</span> <span class="attr">type</span>=<span class="string">&quot;teleop_twist_keyboard.py&quot;</span> <span class="attr">name</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;/cmd_vel&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/turtle1/cmd_vel&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-方案2-1"><a href="#2-方案2-1" class="headerlink" title="2.方案2"></a>2.方案2</h3><p>将乌龟显示节点的话题设置为 <code>/cmd_vel</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">launch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;turtlesim&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turtlesim_node&quot;</span> <span class="attr">name</span>=<span class="string">&quot;t1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">remap</span> <span class="attr">from</span>=<span class="string">&quot;/turtle1/cmd_vel&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/cmd_vel&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span> <span class="attr">pkg</span>=<span class="string">&quot;teleop_twist_keyboard&quot;</span> <span class="attr">type</span>=<span class="string">&quot;teleop_twist_keyboard.py&quot;</span> <span class="attr">name</span>=<span class="string">&quot;key&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">launch</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-5-3-编码设置话题名称"><a href="#4-5-3-编码设置话题名称" class="headerlink" title="4.5.3 编码设置话题名称"></a>4.5.3 编码设置话题名称</h2><p>话题的名称与节点的命名空间、节点的名称是有一定关系的，话题名称大致可以分为三种类型:</p>
<ul>
<li>全局(话题参考ROS系统，与节点命名空间平级)</li>
<li>相对(话题参考的是节点的命名空间，与节点名称平级)</li>
<li>私有(话题参考节点名称，是节点名称的子级)</li>
</ul>
<p>结合编码演示具体关系。</p>
<hr>
<p> ![](<a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28">https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/2025-03-28</a> 17-28-27 的屏幕截图.png)</p>
<hr>
<h3 id="1全局名称"><a href="#1全局名称" class="headerlink" title="1全局名称"></a>1全局名称</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span> (argc,argv,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//核心：设置不同类型的话题</span></span><br><span class="line">    <span class="comment">//1. 全局 --- 话题名称需要以 / 开头</span></span><br><span class="line">    ros::Publisher pub = nh.<span class="built_in">advertise</span>&lt;std_msgs::String&gt;(<span class="string">&quot;/chatter/money&quot;</span>,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**格式:**以<code>/</code>开头的名称，和节点名称无关</p>
<p><strong>比如:</strong>&#x2F;xxx&#x2F;yyy&#x2F;zzz</p>
<p><strong>示例1:</strong><code>ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;/chatter&quot;,1000);</code></p>
<p><strong>结果1:</strong><code>/chatter</code></p>
<p><strong>示例2:</strong><code>ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;/chatter/money&quot;,1000);</code></p>
<p><strong>结果2:</strong><code>/chatter/money</code></p>
<hr>
<h3 id="2-相对名称"><a href="#2-相对名称" class="headerlink" title="2.相对名称"></a>2.相对名称</h3><p>**格式:**非<code>/</code>开头的名称,参考命名空间(与节点名称平级)来确定话题名称</p>
<p><strong>示例1:</strong><code>ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;chatter&quot;,1000);</code></p>
<p><strong>结果1:</strong><code>xxx/chatter</code></p>
<p><strong>示例2:</strong><code>ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;chatter/money&quot;,1000);</code></p>
<p><strong>结果2:</strong><code>xxx/chatter/money</code></p>
<hr>
<h3 id="3-私有名称"><a href="#3-私有名称" class="headerlink" title="3.私有名称"></a>3.私有名称</h3><p>**格式:**以<code>~</code>开头的名称</p>
<p><strong>示例1:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ros::NodeHandle <span class="title">nh</span><span class="params">(<span class="string">&quot;~&quot;</span>)</span></span>;</span><br><span class="line">ros::Publisher pub = nh.<span class="built_in">advertise</span>&lt;std_msgs::String&gt;(<span class="string">&quot;chatter&quot;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p><strong>结果1:</strong><code>/xxx/hello/chatter</code></p>
<p><strong>示例2:</strong></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ros::NodeHandle <span class="title">nh</span><span class="params">(<span class="string">&quot;~&quot;</span>)</span></span>;</span><br><span class="line">ros::Publisher pub = nh.<span class="built_in">advertise</span>&lt;std_msgs::String&gt;(<span class="string">&quot;chatter/money&quot;</span>,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p><strong>结果2:</strong><code>/xxx/hello/chatter/money</code></p>
<p><em>PS:当使用</em><code>~</code><em>,而话题名称有时</em><code>/</code><em>开头时，那么话题名称是绝对的(全局)</em></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ros/ros.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;std_msgs/String.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span>* argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ros::<span class="built_in">init</span> (argc,argv,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    <span class="comment">//ros::NodeHandle nh;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//核心：设置不同类型的话题</span></span><br><span class="line">    <span class="comment">//1. 全局 --- 话题名称需要以 / 开头</span></span><br><span class="line">    <span class="comment">//ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;/chatter/money&quot;,1000);</span></span><br><span class="line">    <span class="comment">//ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;/chatter&quot;,1000);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.相对 --- 非 / 开头的名称</span></span><br><span class="line">    <span class="comment">//ros::Publisher pub = nh.advertise&lt;std_msgs::String&gt;(&quot;chatter&quot;,1000);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.私有 --- 需要创建NodeHandle</span></span><br><span class="line">    <span class="function">ros::NodeHandle <span class="title">nh</span><span class="params">(<span class="string">&quot;~&quot;</span>)</span></span>;</span><br><span class="line">    ros::Publisher pub = nh.<span class="built_in">advertise</span>&lt;std_msgs::String&gt;(<span class="string">&quot;/chatter&quot;</span>,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (ros::<span class="built_in">ok</span>())</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p>Python版本不再赘述</p>
<h3 id="4-Python-实现"><a href="#4-Python-实现" class="headerlink" title="4.Python 实现"></a>4.Python 实现</h3><p>演示准备:</p>
<p>1.初始化节点设置一个节点名称</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rospy.<span class="built_in">init_node</span>(<span class="string">&quot;hello&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>2.设置不同类型的话题</p>
<p>3.启动节点时，传递一个 __ns:&#x3D; xxx</p>
<p>4.节点启动后，使用 rostopic 查看话题信息</p>
<h4 id="4-1全局名称"><a href="#4-1全局名称" class="headerlink" title="4.1全局名称"></a>4.1全局名称</h4><p>**格式:**以<code>/</code>开头的名称，和节点名称无关</p>
<p><strong>示例1:</strong><code>pub = rospy.Publisher(&quot;/chatter&quot;,String,queue_size=1000)</code></p>
<p><strong>结果1:</strong><code>/chatter</code></p>
<p><strong>示例2:</strong><code>pub = rospy.Publisher(&quot;/chatter/money&quot;,String,queue_size=1000)</code></p>
<p><strong>结果2:</strong><code>/chatter/money</code></p>
<h4 id="4-2相对名称"><a href="#4-2相对名称" class="headerlink" title="4.2相对名称"></a>4.2相对名称</h4><p>**格式:**非<code>/</code>开头的名称,参考命名空间(与节点名称平级)来确定话题名称</p>
<p><strong>示例1:</strong><code>pub = rospy.Publisher(&quot;chatter&quot;,String,queue_size=1000)</code></p>
<p><strong>结果1:</strong><code>xxx/chatter</code></p>
<p><strong>示例2:</strong><code>pub = rospy.Publisher(&quot;chatter/money&quot;,String,queue_size=1000)</code></p>
<p><strong>结果2:</strong><code>xxx/chatter/money</code></p>
<h4 id="4-3私有名称"><a href="#4-3私有名称" class="headerlink" title="4.3私有名称"></a>4.3私有名称</h4><p>**格式:**以<code>~</code>开头的名称</p>
<p><strong>示例1:</strong><code>pub = rospy.Publisher(&quot;~chatter&quot;,String,queue_size=1000)</code></p>
<p><strong>结果1:</strong><code>/xxx/hello/chatter</code></p>
<p><strong>示例2:</strong><code>pub = rospy.Publisher(&quot;~chatter/money&quot;,String,queue_size=1000)</code></p>
<p><strong>结果2:</strong><code>/xxx/hello/chatter/money</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Hita</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
