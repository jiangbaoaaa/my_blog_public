<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"gen2710.netlify.app","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.23.2","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":true,"style":null},"fold":{"enable":true,"height":100},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="docker安装及使用安装docker环境介绍 ：  虚拟机：vmware 17pro 系统：ubuntu20.04  下载Docker参考文档：  最详细的ubuntu 安装 docker教程-阿里云开发者社区 (49 封私信 &#x2F; 76 条消息) docker配置镜像Docker pull时报错：https:&#x2F;&#x2F;registry-1.docker.io&#x2F;v2&#x2F; - 知乎   使用Doc">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker 安装及使用">
<meta property="og:url" content="http://gen2710.netlify.app/2025/07/30/docker%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="U.N.O">
<meta property="og:description" content="docker安装及使用安装docker环境介绍 ：  虚拟机：vmware 17pro 系统：ubuntu20.04  下载Docker参考文档：  最详细的ubuntu 安装 docker教程-阿里云开发者社区 (49 封私信 &#x2F; 76 条消息) docker配置镜像Docker pull时报错：https:&#x2F;&#x2F;registry-1.docker.io&#x2F;v2&#x2F; - 知乎   使用Doc">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/image-20250726105837573.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/image-20250726110258459.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250726154933589.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250726154809192.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728163658066.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728201212958.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728201720395.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728202757745.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728203555017.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728205826749.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728211334028.png">
<meta property="og:image" content="https://static001.geekbang.org/infoq/22/22c8413e4b9d8570d178aab1c54da58e.png">
<meta property="og:image" content="https://th.bing.com/th/id/R.60fb3eed56951276ca0ce0431552ab1e?rik=GhYbCOyx/cwvxg&riu=http://www.178linux.com/wp-content/uploads/2018/08/dockerfile%E6%8C%87%E4%BB%A4.png&ehk=bd5ZcaxiwZrFiGvUmg6ZlLEkpWF1uZOa9T80sPwfK2U=&risl=&pid=ImgRaw&r=0">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250729200359835.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250730151940676.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250730152426781.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250730153312945.png">
<meta property="article:published_time" content="2025-07-29T16:00:00.000Z">
<meta property="article:modified_time" content="2025-07-30T08:27:29.683Z">
<meta property="article:author" content="Hita">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/image-20250726105837573.png">


<link rel="canonical" href="http://gen2710.netlify.app/2025/07/30/docker%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://gen2710.netlify.app/2025/07/30/docker%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/","path":"2025/07/30/docker安装及使用/","title":"Docker 安装及使用"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Docker 安装及使用 | U.N.O</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">U.N.O</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#docker%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">docker安装及使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85docker"><span class="nav-number">1.1.</span> <span class="nav-text">安装docker</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BDDocker"><span class="nav-number">1.1.1.</span> <span class="nav-text">下载Docker</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8Docker"><span class="nav-number">1.2.</span> <span class="nav-text">使用Docker</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="nav-number">1.2.1.</span> <span class="nav-text">Docker基本组成</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.</span> <span class="nav-text">Docker 常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.1.</span> <span class="nav-text">帮助命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.2.</span> <span class="nav-text">镜像命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.3.</span> <span class="nav-text">容器命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.4.</span> <span class="nav-text">常用其他命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="nav-number">1.3.5.</span> <span class="nav-text">可视化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker%E9%95%9C%E5%83%8F%E8%AE%B2%E8%A7%A3"><span class="nav-number">1.4.</span> <span class="nav-text">Docker镜像讲解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%95%9C%E5%83%8FCommit"><span class="nav-number">1.4.1.</span> <span class="nav-text">镜像Commit</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="nav-number">1.5.</span> <span class="nav-text">容器数据卷</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="nav-number">1.5.1.</span> <span class="nav-text">什么是容器数据卷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="nav-number">1.5.2.</span> <span class="nav-text">使用数据卷</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%BF%E5%90%8D%E6%8C%82%E8%BD%BD%E5%92%8C%E5%85%B7%E5%90%8D%E6%8C%82%E8%BD%BD"><span class="nav-number">1.5.3.</span> <span class="nav-text">匿名挂载和具名挂载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%AE%B9%E5%99%A8"><span class="nav-number">1.5.4.</span> <span class="nav-text">数据卷容器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DockerFile"><span class="nav-number">1.6.</span> <span class="nav-text">DockerFile</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFDockerFile"><span class="nav-number">1.6.1.</span> <span class="nav-text">什么是DockerFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile%E6%9E%84%E5%BB%BA%E8%BF%87%E7%A8%8B"><span class="nav-number">1.6.2.</span> <span class="nav-text">DockerFile构建过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E6%88%98%E6%B5%8B%E8%AF%95"><span class="nav-number">1.6.3.</span> <span class="nav-text">实战测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E5%B8%83%E9%95%9C%E5%83%8F"><span class="nav-number">1.6.4.</span> <span class="nav-text">发布镜像</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Hita"
      src="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/myself.jpg">
  <p class="site-author-name" itemprop="name">Hita</p>
  <div class="site-description" itemprop="description">Gains Don't Stop!</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/jiangbaoaaa" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;jiangbaoaaa" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:n13155609602@163.com" title="E-mail → mailto:n13155609602@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-mail</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="返回顶部">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://gen2710.netlify.app/2025/07/30/docker%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://raw.githubusercontent.com/jiangbaoaaa/my_blog_img/main/myself.jpg">
      <meta itemprop="name" content="Hita">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="U.N.O">
      <meta itemprop="description" content="Gains Don't Stop!">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Docker 安装及使用 | U.N.O">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Docker 安装及使用
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2025-07-30 00:00:00 / 修改时间：16:27:29" itemprop="dateCreated datePublished" datetime="2025-07-30T00:00:00+08:00">2025-07-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%B7%A5%E5%85%B7%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">工具学习</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="docker安装及使用"><a href="#docker安装及使用" class="headerlink" title="docker安装及使用"></a>docker安装及使用</h1><h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><p><strong>环境介绍</strong> ：</p>
<ul>
<li>虚拟机：vmware 17pro</li>
<li>系统：ubuntu20.04</li>
</ul>
<h3 id="下载Docker"><a href="#下载Docker" class="headerlink" title="下载Docker"></a>下载Docker</h3><p>参考文档：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/1323800">最详细的ubuntu 安装 docker教程-阿里云开发者社区</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24228872523">(49 封私信 &#x2F; 76 条消息) docker配置镜像Docker pull时报错：https://registry-1.docker.io/v2/ - 知乎</a></li>
</ul>
<hr>
<h2 id="使用Docker"><a href="#使用Docker" class="headerlink" title="使用Docker"></a>使用Docker</h2><h3 id="Docker基本组成"><a href="#Docker基本组成" class="headerlink" title="Docker基本组成"></a>Docker基本组成</h3><p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/image-20250726105837573.png" alt="image-20250726105837573"></p>
<p><strong>镜像(image)</strong>：只是一个只读的模板，可以用来创建容器，一个镜像可以创建多个容器。</p>
<p><strong>容器(container)</strong> ：利用容器独立运行一个或者一组应用，容器时用镜像创建的运行实例。每个容器是相互隔离的，一个容器相当于一个简易版的环境。它的定义和镜像类似，唯一的区别在于容器的最上面一层是可读可写的。</p>
<p><strong>仓库(repository)</strong>：仓库是集中存放镜文件的场所，最大的公开仓库是Docker Hub。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/image-20250726110258459.png" alt="image-20250726110258459"></p>
<hr>
<h2 id="Docker-常用命令"><a href="#Docker-常用命令" class="headerlink" title="Docker 常用命令"></a>Docker 常用命令</h2><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker -v 		# 显示Docker版本信息</span><br><span class="line">docker info 	# 显示Docker系统信息，包括镜像和容器数</span><br><span class="line">docker --help 	# 帮助</span><br></pre></td></tr></table></figure>

<h3 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h3><ol>
<li>docker images</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker images		# 列出本地主机上的镜像</span><br><span class="line"># 解释</span><br><span class="line">REPOSITORY   镜像的仓库源</span><br><span class="line">TAG          镜像的标签</span><br><span class="line">IMAGE ID     镜像的ID</span><br><span class="line"> CREATED      镜像创建时间</span><br><span class="line">SIZE         镜像大小</span><br><span class="line"></span><br><span class="line">-a：        列出本地所有镜像</span><br><span class="line">-q：        只显示镜像id</span><br><span class="line">--digests： 显示镜像的摘要信息</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>docker search</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search 镜像名称		# 例如 docker search mysql</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>docker pull</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull 镜像名称		# 例如 docker pull mysql</span><br><span class="line"># 如果不添加tag，则拉取最新的，也可以添加tag：docker pull mysql:5.7  具体的tag可以去docker hub 查看</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>docker rmi(remove image)</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rmi -f 镜像id</span><br><span class="line">docker rmi -f $(docker images -qa)		# 删除全部</span><br></pre></td></tr></table></figure>

<h3 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h3><p>必须要先下载镜像才能创建容器，使用centos镜像来测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br></pre></td></tr></table></figure>

<ol>
<li>新建容器并启动</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run [选项] image [指令]</span><br><span class="line"></span><br><span class="line"># 常用选项：</span><br><span class="line">--name=&quot;Name&quot;               # 给容器指定一个名字</span><br><span class="line">-d                          # 后台方式运行容器，并返回容器的id！</span><br><span class="line">-i                          # 以交互模式运行容器，通过和 -t 一起使用</span><br><span class="line">-t                          # 给容器重新分配一个终端，通常和 -i 一起使用</span><br><span class="line">-P                          # 随机端口映射（大写）</span><br><span class="line">-p                          # 指定端口映射（小写）</span><br><span class="line"></span><br><span class="line"># 使用centos进行交互式启动容器，在容器中执行/bin/bash命令</span><br><span class="line">docker run -it centos /bin/bash</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>列出所有运行的容器</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker ps </span><br><span class="line"></span><br><span class="line"># 常用选项</span><br><span class="line">-a 	# 列出当前所有正在运行的容器和历史运行的容器</span><br><span class="line">-l 	#显示最近创建的容器</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>退出容器</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit		# 退出容器并且停止</span><br><span class="line">ctrl+p+q	# 容器不停止退出</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>启动停止容器</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker start (容器id or 容器名)        # 启动容器</span><br><span class="line">docker restart (容器id or 容器名)      # 重启容器</span><br><span class="line">docker stop (容器id or 容器名)         # 停止容器</span><br><span class="line">docker kill (容器id or 容器名)         # 强制停止容器</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>删除容器</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker rm 容器id                  # 删除指定容器</span><br><span class="line">docker rm -f $(docker ps -a -q)  # 删除所有容器</span><br><span class="line">docker ps -a -q|xargs docker rm  # 删除所有容器</span><br></pre></td></tr></table></figure>

<h3 id="常用其他命令"><a href="#常用其他命令" class="headerlink" title="常用其他命令"></a>常用其他命令</h3><ol>
<li>后台启动容器</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dockerrun -d 容器名</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>查看容器中运行的进程信息</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker top 容器id</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>查看容器&#x2F;镜像的元数据</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect 容器id</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>进入正在运行的容器</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器名</span><br><span class="line">docker attach 容器id</span><br><span class="line"></span><br><span class="line"># 区别</span><br><span class="line"># exec   是在容器中打开新的终端，并且可以启动新的进程</span><br><span class="line"># attach 直接进入容器启动命令的终端，不会启动新的进程</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>从容器内拷贝文件到主机</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp 容器id:容器内路径 目的地路径</span><br></pre></td></tr></table></figure>

<h3 id="可视化"><a href="#可视化" class="headerlink" title="可视化"></a>可视化</h3><p>Portainer安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9000:9000 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce</span><br></pre></td></tr></table></figure>

<p>Portainer是Docker的图形化管理工具，提供状态显示面板、应用模板快速部署、容器镜像网络数据卷 的基本操作（包括上传下载镜像，创建容器等操作）、事件日志显示、容器控制台操作、Swarm集群和 服务等集中管理和操作、登录用户管理和控制等功能。功能十分全面，基本能满足中小型单位对容器管 理的全部需求。</p>
<p>访问方式：<a target="_blank" rel="noopener" href="http://ip:9000/">http://ip:9000</a></p>
<p>查看自己的ip:<code>ifconfig</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250726154933589.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250726154809192.png"></p>
<hr>
<h2 id="Docker镜像讲解"><a href="#Docker镜像讲解" class="headerlink" title="Docker镜像讲解"></a>Docker镜像讲解</h2><p> 镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含 运行某个软件所需的所有内容，包括代码、运行时、库、环境变量和配置文件。</p>
<p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部！ 这一层就是我们通常说的容器层，容器之下的都叫镜像层！</p>
<h3 id="镜像Commit"><a href="#镜像Commit" class="headerlink" title="镜像Commit"></a>镜像Commit</h3><p>docker commit 从容器创建一个新的镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m=&quot;提交的信息&quot; -a=&quot;作者&quot; 容器id 要创建的目标镜像名:[标签名]</span><br><span class="line">如果要保留现在容器的状态，可以通过commit，提交镜像，方便使用，类似于vm中的快照。</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="容器数据卷"><a href="#容器数据卷" class="headerlink" title="容器数据卷"></a>容器数据卷</h2><h3 id="什么是容器数据卷"><a href="#什么是容器数据卷" class="headerlink" title="什么是容器数据卷"></a>什么是容器数据卷</h3><p>容器之间可以共享数据，可以保存数据，让数据挂在到本地，数据就不会因为容器删除丢失。<strong>容器数据卷可以使得容器持久化，保证容器之间数据的共享以及继承。</strong></p>
<h3 id="使用数据卷"><a href="#使用数据卷" class="headerlink" title="使用数据卷"></a>使用数据卷</h3><blockquote>
<p>方式一：容器中直接使用命令添加</p>
</blockquote>
<p><strong>挂载</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v 宿主机绝对路径目录：容器内目录 镜像名</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line">docker run  -it -v /home/test:/home ubuntu:20.04 /bin/bash</span><br></pre></td></tr></table></figure>

<p>查看是否挂载成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查看容器id</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">hita@hita-vm:/$ docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                   CREATED         STATUS                     PORTS     NAMES</span><br><span class="line">0bbaf7ac2bdc   ubuntu:20.04   &quot;/bin/bash&quot;               3 minutes ago   Exited (0) 3 minutes ago             keen_dirac</span><br><span class="line">8aa9983a7e8f   2cd1d97f893f   &quot;/docker-entrypoint.…&quot;   2 days ago      Exited (0) 2 days ago                mynginx</span><br><span class="line">63cfb2f424a8   74cc54e27dc4   &quot;/hello&quot;                  3 days ago      Exited (0) 3 days ago                sad_chaum</span><br><span class="line">c06b8b5fe3d7   74cc54e27dc4   &quot;/hello&quot;                  3 days ago      Exited (0) 3 days ago                suspicious_snyder</span><br><span class="line"></span><br><span class="line"># 查看元数据</span><br><span class="line">docker inspect 0bbaf7ac2bdc</span><br></pre></td></tr></table></figure>

<p>可以看到有这一段：</p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728163658066.png"></p>
<p>测试容器和宿主机之间数据共享：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 容器内</span><br><span class="line">root@0bbaf7ac2bdc:/# cd home</span><br><span class="line">root@0bbaf7ac2bdc:/home# ls</span><br><span class="line">root@0bbaf7ac2bdc:/home# touch test.java</span><br><span class="line">root@0bbaf7ac2bdc:/home# ls</span><br><span class="line">test.java</span><br><span class="line"></span><br><span class="line"># 宿主机</span><br><span class="line">hita@hita-vm:/home$ cd test</span><br><span class="line">hita@hita-vm:/home/test$ ls</span><br><span class="line">test.java</span><br></pre></td></tr></table></figure>

<p>在容器中创建的会在宿主机中看到，反过来也一样，相当于在宿主机与容器内目录下新建任何文件，都会同步。并且就算是容器停止退出之后，主机修改数据，同样在容器中也会同步。只要是在预设的目录下的文件。就算是把容器删除之后，同样能够在主机中保留删除前的数据。</p>
<blockquote>
<p>方式二：通过Docker File添加容器数据卷</p>
</blockquote>
<p>DockerFile是用来构建Docker镜像的构建文件，是由一系列命令和参数构成的脚本。</p>
<p><strong>测试</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 在宿主机 /home 目录下新建一个 docker-test-volume 文件夹</span><br><span class="line">hita@hita-vm:~$ mkdir docker-test-volume</span><br><span class="line">hita@hita-vm:~$ cd /home</span><br><span class="line">hita@hita-vm:/home$ sudo mkdir docker-test-volume</span><br><span class="line">[sudo] hita 的密码：       </span><br><span class="line">hita@hita-vm:/home$ ls</span><br><span class="line">docker-test-volume  hita  test</span><br><span class="line"></span><br><span class="line"># 编写 DockerFile 文件</span><br><span class="line">hita@hita-vm:/home$ pwd</span><br><span class="line">/home</span><br><span class="line">hita@hita-vm:/home$ cd docker-test-volume/</span><br><span class="line">hita@hita-vm:/home/docker-test-volume$ sudo gedit dockerfile1</span><br><span class="line"></span><br><span class="line"># 内容</span><br><span class="line">FROM ubuntu:20.04</span><br><span class="line"></span><br><span class="line">VOLUME [&quot;/dataVolumeContainer1&quot;,&quot;/dataVolumeContainer2&quot;]</span><br><span class="line"> </span><br><span class="line">CMD /bin/bash &amp;&amp; echo &quot;-------finish------&quot;</span><br><span class="line"></span><br><span class="line"># ubild 后生成镜像，获得一个新的镜像</span><br><span class="line">hita@hita-vm:/home/docker-test-volume$ docker build -f /home/docker-test-volume/dockerfile1 -t test/ubuntu .</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728201212958.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728201720395.png"></p>
<p>可以看到新增了一个镜像test&#x2F;ubuntu.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 启动容器</span><br><span class="line">docker run -it 1350 /bin/bash</span><br></pre></td></tr></table></figure>

<p>可以看到新建的两个数据卷。</p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728202757745.png"></p>
<p>通过上述步骤，已经知道了容器内卷目录的地址，但是不知道对应主机的目录地址在哪</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 在数据卷中新建一个文件</span><br><span class="line">root@9d4fe1d5212f:/# cd dataVolumeContainer1</span><br><span class="line">root@9d4fe1d5212f:/dataVolumeContainer1# pwd</span><br><span class="line">/dataVolumeContainer1</span><br><span class="line">root@9d4fe1d5212f:/dataVolumeContainer1# touch container.txt</span><br><span class="line">root@9d4fe1d5212f:/dataVolumeContainer1# ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 28 12:32 container.txt</span><br><span class="line"></span><br><span class="line"># 查看容器信息</span><br><span class="line">hita@hita-vm:~$ docker inspect 1350</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728203555017.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 在容器内新建一个文件</span><br><span class="line">root@9d4fe1d5212f:/# cd dataVolumeContainer1</span><br><span class="line">root@9d4fe1d5212f:/dataVolumeContainer1# touch container.txt</span><br><span class="line">root@9d4fe1d5212f:/dataVolumeContainer1# ls</span><br><span class="line">container.txt</span><br><span class="line"></span><br><span class="line"># 在宿主机查看位置</span><br><span class="line">hita@hita-vm:~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE          COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">9d4fe1d5212f   1350           &quot;/bin/bash&quot;   36 minutes ago   Up 36 minutes             eager_banzai</span><br><span class="line">0bbaf7ac2bdc   ubuntu:20.04   &quot;/bin/bash&quot;   5 hours ago      Up 4 hours                keen_dirac</span><br><span class="line">hita@hita-vm:~$ docker inspect 9d4f</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728205826749.png"></p>
<p>这属于是匿名挂载，后面会讲。</p>
<p>接下来测试在容器内新建的文件是否同步了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hita@hita-vm:~$ sudo -i</span><br><span class="line">root@hita-vm:~# cd /var/lib/docker/volumes/ce568fe2101804c5e79cd74df09d8cd49993ab7f4c71a5c0b80173e298837f3b/_data</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250728211334028.png"></p>
<p>这个卷是在主机的默认位置。</p>
<hr>
<h3 id="匿名挂载和具名挂载"><a href="#匿名挂载和具名挂载" class="headerlink" title="匿名挂载和具名挂载"></a>匿名挂载和具名挂载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 匿名挂载</span><br><span class="line">-v 容器内路径</span><br><span class="line">docker run -d -p -- name nginx01 -v /etc/nginx nginx</span><br><span class="line"></span><br><span class="line"># 匿名挂载缺点是不好维护，通常使用docker volume 维护</span><br><span class="line">docker volume ls</span><br><span class="line"></span><br><span class="line"># 具名挂载</span><br><span class="line">-v 卷名：/容器内路径</span><br><span class="line">docker run -d -P --name nginx02 -v nginxconfig:/etc/nginx nginx</span><br><span class="line"></span><br><span class="line"># 查看挂载的路径</span><br><span class="line"></span><br><span class="line">hita@hita-vm:~$ docker volume inspect nginxconfig </span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2025-07-29T10:20:20+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: null,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/nginxconfig/_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;nginxconfig&quot;,</span><br><span class="line">        &quot;Options&quot;: null,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>挂载卷跟挂载目录有什么区别呢？</strong></p>
<p>挂载卷用于在容器之间持久化和共享数据，存储在docker主机的特定目录中。如上nginxconfig就是一个挂载卷，目录挂载就是将Docker容器与主机的目录进行映射，Docker不会像管理卷一样管理这个目录。</p>
<ul>
<li><strong>挂载卷</strong>是由 Docker 管理的数据存储机制，适合用于持久化和共享数据。</li>
<li><strong>挂载目录</strong>是用户直接指定的本地文件系统路径，适合用于开发和直接操作主机文件系统的场景。</li>
</ul>
<p>需要判断挂载的是卷名而不是本机目录名？</p>
<p>挂载创建的时候：<strong>不是&#x2F;开始就是卷名，是&#x2F;开始就是目录名。</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 目录挂载</span><br><span class="line">docker run  -it -v /home/test:/home ubuntu:20.04 /bin/bash</span><br><span class="line"></span><br><span class="line"># 卷挂载</span><br><span class="line">docker run -d -P --name nginx02 -v nginxconfig:/etc/nginx nginx</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h3><p>命名的容器挂载数据卷，其他容器通过挂载在这个父容器实现数据共享，挂载数据卷的容器，就是数据卷容器。其本身不运行任何应用程序，仅用于存储数据。</p>
<ol>
<li>先启动那个父容器docker 然后再datavolumecontainer2添加新文件</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">hita@hita-vm:~$ docker run -it --name docker test/ubuntu:latest </span><br><span class="line">-------finish------</span><br><span class="line">root@713998876d0c:/# ls -l</span><br><span class="line">total 56</span><br><span class="line">lrwxrwxrwx   1 root root    7 Apr  4 02:03 bin -&gt; usr/bin</span><br><span class="line">drwxr-xr-x   2 root root 4096 Apr 15  2020 boot</span><br><span class="line">drwxr-xr-x   2 root root 4096 Jul 29 02:54 dataVolumeContainer1</span><br><span class="line">drwxr-xr-x   2 root root 4096 Jul 29 02:54 dataVolumeContainer2</span><br><span class="line">drwxr-xr-x   5 root root  360 Jul 29 02:54 dev</span><br><span class="line">drwxr-xr-x   1 root root 4096 Jul 29 02:54 etc</span><br><span class="line">drwxr-xr-x   2 root root 4096 Apr 15  2020 home</span><br><span class="line">lrwxrwxrwx   1 root root    7 Apr  4 02:03 lib -&gt; usr/lib</span><br><span class="line">lrwxrwxrwx   1 root root    9 Apr  4 02:03 lib32 -&gt; usr/lib32</span><br><span class="line">lrwxrwxrwx   1 root root    9 Apr  4 02:03 lib64 -&gt; usr/lib64</span><br><span class="line">lrwxrwxrwx   1 root root   10 Apr  4 02:03 libx32 -&gt; usr/libx32</span><br><span class="line">drwxr-xr-x   2 root root 4096 Apr  4 02:03 media</span><br><span class="line">drwxr-xr-x   2 root root 4096 Apr  4 02:03 mnt</span><br><span class="line">drwxr-xr-x   2 root root 4096 Apr  4 02:03 opt</span><br><span class="line">dr-xr-xr-x 475 root root    0 Jul 29 02:54 proc</span><br><span class="line">drwx------   2 root root 4096 Apr  4 02:09 root</span><br><span class="line">drwxr-xr-x   5 root root 4096 Apr  4 02:09 run</span><br><span class="line">lrwxrwxrwx   1 root root    8 Apr  4 02:03 sbin -&gt; usr/sbin</span><br><span class="line">drwxr-xr-x   2 root root 4096 Apr  4 02:03 srv</span><br><span class="line">dr-xr-xr-x  13 root root    0 Jul 29 02:54 sys</span><br><span class="line">drwxrwxrwt   2 root root 4096 Apr  4 02:09 tmp</span><br><span class="line">drwxr-xr-x  13 root root 4096 Apr  4 02:03 usr</span><br><span class="line">drwxr-xr-x  11 root root 4096 Apr  4 02:09 var</span><br><span class="line">root@713998876d0c:/# cd dataVolumeContainer2</span><br><span class="line">root@713998876d0c:/dataVolumeContainer2# touch docker.txt</span><br><span class="line">root@713998876d0c:/dataVolumeContainer2# ls</span><br><span class="line">docker.txt</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建docker02 ,docker03继承docker</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">创建docker02</span><br><span class="line">hita@hita-vm:~$ cd /home/docker-test-volume/</span><br><span class="line">hita@hita-vm:/home/docker-test-volume$ docker run -it --name docker02 --volumes-from docker test/ubuntu:latest </span><br><span class="line">-------finish------</span><br><span class="line">root@389cd5a12747:/# cd dataVolumeContainer2</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# ls</span><br><span class="line">docker.txt</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# touch docker02.txt</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# ls</span><br><span class="line">docker.txt  docker02.txt</span><br><span class="line"></span><br><span class="line"># 创建docker03</span><br><span class="line">hita@hita-vm:~$ cd /home</span><br><span class="line">hita@hita-vm:/home$ cd docker-test-volume/</span><br><span class="line">hita@hita-vm:/home/docker-test-volume$ docker run -it --name docker03 --volumes-from docker test/ubuntu:latest </span><br><span class="line">-------finish------</span><br><span class="line">root@8e3c5ff93b8a:/# cd dataVolumeContainer2</span><br><span class="line">root@8e3c5ff93b8a:/dataVolumeContainer2# ls</span><br><span class="line">docker.txt  docker02.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>可以看到，docker02继承了docker 的文件docker.txt.在docker03中新建文件docker03.txt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@8e3c5ff93b8a:/dataVolumeContainer2# touch docker03.txt</span><br><span class="line">root@8e3c5ff93b8a:/dataVolumeContainer2# ls</span><br><span class="line">docker.txt  docker02.txt  docker03.txt</span><br><span class="line">root@8e3c5ff93b8a:/dataVolumeContainer2# </span><br><span class="line"></span><br><span class="line"># 在docker 中查看</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# ls                                    </span><br><span class="line">docker.txt  docker02.txt  docker03.txt</span><br></pre></td></tr></table></figure>

<p>可以发现docker02 docker03创建的共享文件。</p>
<ol start="3">
<li>删除docker ,修改docker02 后，docker03还能不能访问</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 删除docker</span><br><span class="line">hita@hita-vm:/home/docker-test-volume$ docker rm -f docker</span><br><span class="line"></span><br><span class="line"># 修改docker02</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 02:56 docker.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:01 docker02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:03 docker03.txt</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# touch docker02-update.txt</span><br><span class="line">root@389cd5a12747:/dataVolumeContainer2# ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 02:56 docker.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:12 docker02-update.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:01 docker02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:03 docker03.txt</span><br><span class="line"></span><br><span class="line"># 查看docker03变化</span><br><span class="line">root@8e3c5ff93b8a:/dataVolumeContainer2# ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 02:56 docker.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:12 docker02-update.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:01 docker02.txt</span><br><span class="line">-rw-r--r-- 1 root root 0 Jul 29 03:03 docker03.txt</span><br></pre></td></tr></table></figure>

<p>后续同样删除docker02容器，docker03同样可以访问原来的共享文件，如果新建docker04来继承docker03，在删除docker03，同样可以访问共享文件。所以得出结论：</p>
<p><strong>容器之间配置信息的传递，数据卷的生命周期会一直持续到没有容器使用它位置，存储在本机的文件会一直保留。</strong></p>
<hr>
<h2 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h2><h3 id="什么是DockerFile"><a href="#什么是DockerFile" class="headerlink" title="什么是DockerFile"></a>什么是DockerFile</h3><p>dockerfile是用来构建Docker镜像的构建文件，<strong>是由一系列命令和参数构成的脚本</strong></p>
<p>构建步骤：</p>
<ol>
<li>编写DockerFile文件</li>
<li>docker build 构建镜像</li>
<li>docker run</li>
</ol>
<hr>
<h3 id="DockerFile构建过程"><a href="#DockerFile构建过程" class="headerlink" title="DockerFile构建过程"></a>DockerFile构建过程</h3><p><strong>基础知识</strong></p>
<ol>
<li>每条保留字指令都必须大写并且后面至少跟随一个参数</li>
<li>指令从上到下顺序执行</li>
<li>#表示注释</li>
<li>每条指令都会创建一个新的镜像层，并且对镜像进行提交</li>
</ol>
<p><strong>流程</strong></p>
<ol>
<li>docker 从基础镜像运行一个容器</li>
<li>执行一条指令并且对容器做出修改</li>
<li>执行类似 docker commit 的操作提交新的镜像层</li>
<li>Docker 再基于刚提交的镜像运行一个新的容器</li>
<li>执行dockerfile中的下一条指令直到所有的指令都执行完成</li>
</ol>
<p><strong>说明</strong></p>
<p>从应用软件角度，DockerFile 、docker镜像与docker容器分别代表软件的三个不同阶段</p>
<ul>
<li>DockerFile是软件的原材料（代码）</li>
<li>Docker镜像是软件的交付品（.apk）</li>
<li>Docker容器则是软件的运行状态（客户下载安装执行）</li>
</ul>
<p><img src="https://static001.geekbang.org/infoq/22/22c8413e4b9d8570d178aab1c54da58e.png" alt="img"></p>
<p><strong>DockerFile</strong>：需要定义一个DockerFile，DockerFile定义了进程需要的一切东西。DockerFile涉及的内容 包括执行代码或者是文件、环境变量、依赖包、运行时环境、动态链接库、操作系统的发行版、服务进 程和内核进程（当引用进行需要和系统服务和内核进程打交道，这时需要考虑如何设计 namespace的权 限控制）等等。 </p>
<p><strong>Docker镜像</strong>：在DockerFile 定义了一个文件之后，Docker build 时会产生一个Docker镜像，当运行  Docker 镜像时，会真正开始提供服务；</p>
<p> <strong>Docker容器</strong>：容器是直接提供服务的。</p>
<hr>
<p>DockerFile指令</p>
<p><img src="https://th.bing.com/th/id/R.60fb3eed56951276ca0ce0431552ab1e?rik=GhYbCOyx/cwvxg&riu=http://www.178linux.com/wp-content/uploads/2018/08/dockerfile%E6%8C%87%E4%BB%A4.png&ehk=bd5ZcaxiwZrFiGvUmg6ZlLEkpWF1uZOa9T80sPwfK2U=&risl=&pid=ImgRaw&r=0" alt="Docker容器技术之Dockerfile | Linux运维部落"></p>
<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250729200359835.png"></p>
<h3 id="实战测试"><a href="#实战测试" class="headerlink" title="实战测试"></a>实战测试</h3><blockquote>
<p>自定义一个 ubuntu20.04</p>
</blockquote>
<ol>
<li>编写DockerFile</li>
</ol>
<p>查看下官方默认的ubuntu:20.04的情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hita@hita-vm:~$ docker run -it ubuntu:20.04 </span><br><span class="line">root@59ceb0729bd7:/# pwd</span><br><span class="line">/</span><br><span class="line">root@59ceb0729bd7:/# vim a.txt</span><br><span class="line">bash: vim: command not found</span><br><span class="line">root@59ceb0729bd7:/# ifconfig</span><br><span class="line">bash: ifconfig: command not found</span><br><span class="line">root@59ceb0729bd7:/# </span><br></pre></td></tr></table></figure>

<p><strong>修改目的</strong>：使得自己的镜像具备如下功能：登陆后的默认路径、vim编译器、查看网络配置ifconfig支持</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">FROM ubuntu:20.04</span><br><span class="line">MAINTAINER kuangshen&lt;24736743@qq.com&gt;</span><br><span class="line"></span><br><span class="line"># 设置环境变量</span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line"></span><br><span class="line"># 设置工作目录</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line"></span><br><span class="line"># 更新apt-get并安装vim和net-tools</span><br><span class="line">RUN apt-get update &amp;&amp; apt-get install -y vim net-tools </span><br><span class="line"></span><br><span class="line"># 暴露80端口</span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"># 输出环境变量MYPATH</span><br><span class="line">CMD echo $MYPATH</span><br><span class="line"></span><br><span class="line"># 输出结束信息</span><br><span class="line">CMD echo &quot;----------end--------&quot;</span><br><span class="line"></span><br><span class="line"># 启动bash</span><br><span class="line">CMD /bin/bash</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>构建</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f mydockerfile-test -t myubuntu:0.1</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250730151940676.png"></p>
<ol start="3">
<li>运行</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it myubuntu:0.1</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250730152426781.png"></p>
<p>可以看到，镜像已经支持vim&#x2F;ifconfig的命令了</p>
<ol start="4">
<li>列出镜像的变更历史</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker history myubuntu:0.1</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/jiangbaoaaa/my_blog_img@main/20250730153312945.png"></p>
<hr>
<blockquote>
<p>CMD和ENTRYPOINT的区别</p>
</blockquote>
<p>CMD: DockerFile 中可以有很多cmd指令,但只有最后一个生效,cmd会被 docker run 之后的参数替换</p>
<p>ENTRYPOINT: docker run 之后的参数会被当作参数传递给ENTROPOINT 之后形成新的命令组合</p>
<hr>
<h3 id="发布镜像"><a href="#发布镜像" class="headerlink" title="发布镜像"></a>发布镜像</h3><p>留个坑，后面再填</p>
<hr>
<p>参考视频：</p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4/?p=34&spm_id_from=333.1007.top_right_bar_window_history.content.click">https://www.bilibili.com/video/BV1og4y1q7M4/?p=34&amp;spm_id_from=333.1007.top_right_bar_window_history.content.click</a></p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/07/23/%E7%81%AB%E7%84%B0%E4%BD%8D%E7%BD%AE%E5%AF%BC%E8%88%AA/" rel="prev" title="利用move_base使得小车导航至火焰位置">
                  <i class="fa fa-angle-left"></i> 利用move_base使得小车导航至火焰位置
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/08/01/EndNote%20%E4%BD%BF%E7%94%A8/" rel="next" title="EndNote使用">
                  EndNote使用 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Hita</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
